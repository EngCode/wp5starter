(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function MarkerClusterer(t,e,r){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var s=r||{};this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.imagePath_=s.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=s.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,null!=s.averageCenter&&(this.averageCenter_=s.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var o=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=o.map_.getZoom(),e=o.map_.minZoom||0,r=Math.min(o.map_.maxZoom||100,o.map_.mapTypes[o.map_.getMapTypeId()].maxZoom);t=Math.min(Math.max(t,e),r),o.prevZoom_!=t&&(o.prevZoom_=t,o.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){o.redraw()}),e&&(e.length||Object.keys(e).length)&&this.addMarkers(e,!1)}function Cluster(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,t.getStyles(),t.getGridSize())}function ClusterIcon(t,e,r){t.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=e,this.padding_=r||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),r=new google.maps.LatLngBounds,s=0;t=e[s];s++)r.extend(t.getPosition());this.map_.fitBounds(r)},MarkerClusterer.prototype.setStyles=function(t){this.styles_=t},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(t){this.maxZoom_=t},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(t,e){for(var r=0,s=t.length,o=s;0!==o;)o=parseInt(o/10,10),r++;return{text:s,index:r=Math.min(r,e)}},MarkerClusterer.prototype.setCalculator=function(t){this.calculator_=t},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(t,e){if(t.length)for(var r=0;s=t[r];r++)this.pushMarkerTo_(s);else if(Object.keys(t).length)for(var s in t)this.pushMarkerTo_(t[s]);e||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},MarkerClusterer.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var r,s=0;r=this.markers_[s];s++)if(r==t){e=s;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},MarkerClusterer.prototype.removeMarker=function(t,e){var r=this.removeMarker_(t);return!(e||!r)&&(this.resetViewport(),this.redraw(),!0)},MarkerClusterer.prototype.removeMarkers=function(t,e){for(var r,s=t===this.getMarkers()?t.slice():t,o=!1,i=0;r=s[i];i++){var a=this.removeMarker_(r);o=o||a}if(!e&&o)return this.resetViewport(),this.redraw(),!0},MarkerClusterer.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(t){this.map_=t},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(t){this.gridSize_=t},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},MarkerClusterer.prototype.getExtendedBounds=function(t){var e=this.getProjection(),r=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),s=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(r);o.x+=this.gridSize_,o.y-=this.gridSize_;var i=e.fromLatLngToDivPixel(s);i.x-=this.gridSize_,i.y+=this.gridSize_;var a=e.fromDivPixelToLatLng(o),n=e.fromDivPixelToLatLng(i);return t.extend(a),t.extend(n),t},MarkerClusterer.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(t){for(var e,r=0;e=this.clusters_[r];r++)e.remove();var s;for(r=0;s=this.markers_[r];r++)s.isAdded=!1,t&&s.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,r=0;e=t[r];r++)e.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var r=(e.lat()-t.lat())*Math.PI/180,s=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},MarkerClusterer.prototype.addToClosestCluster_=function(t){for(var e,r=4e4,s=null,o=(t.getPosition(),0);e=this.clusters_[o];o++){var i=e.getCenter();if(i){var a=this.distanceBetweenPoints_(i,t.getPosition());a<r&&(r=a,s=e)}}s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):((e=new Cluster(this)).addMarker(t),this.clusters_.push(e))},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(e),s=0;t=this.markers_[s];s++)!t.isAdded&&this.isMarkerInBounds_(t,r)&&this.addToClosestCluster_(t)},Cluster.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,r=0;e=this.markers_[r];r++)if(e==t)return!0;return!1},Cluster.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,r=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,s=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var o=this.markers_.length;if(o<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),o==this.minClusterSize_)for(var i=0;i<o;i++)this.markers_[i].setMap(null);return o>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),s=0;t=r[s];s++)e.extend(t.getPosition());return e},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},Cluster.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var r,s=0;r=this.markers_[s];s++)r.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var o=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,o);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t.map_,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",function(){e.triggerClusterClick()})},ClusterIcon.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),e},ClusterIcon.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition},ClusterIcon.prototype.setCenter=function(t){this.center_=t},ClusterIcon.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+r+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var s=this.textColor_?this.textColor_:"black",o=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+s+"; position:absolute; font-size:"+o+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,Object.keys=Object.keys||function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};

},{}],2:[function(require,module,exports){
"use strict";function yoast_remove_location(){var t=jQuery(this).closest("tr"),o=t.data("id"),e=t.data("title"),a=t.data("defaults");t.remove(),jQuery("#location_setting_select").append('<option value="'+o+"\" data-defaults='"+JSON.stringify(a)+"'>"+decodeURI(e)+"</option>")}jQuery(document).ready(function(t){t("#location_setting_add").click(function(){var o=t("#location_setting_select").val();if(0!=o){var e=t("#location_setting_select option:selected").text(),a=t("#location_setting_select option:selected").data("defaults");t("#location_setting_select option:selected").remove();var l="";0==yoast_wcseo_local_translations.has_categories&&(l+=' checked="checked"'),t("tbody#shipping_locations").append('<tr class="location" data-id="'+o+'" data-title="'+encodeURI(e)+"\" data-defaults='"+JSON.stringify(a)+'\'  ><th scope="row" class="check-column"></th><td>'+e+'</td><td><label for="yoast_wcseo_local_pickup_location_allowed['+o+']" class="screen-reader-text">'+yoast_wcseo_local_translations.label_allow_location.replace("%s",e)+'</label><input type="checkbox"'+l+' name="yoast_wcseo_local_pickup_location_allowed['+o+']" /> <small>'+a.status+'</small></td><td><label for="yoast_wcseo_local_pickup_location_cost['+o+']" class="screen-reader-text">'+yoast_wcseo_local_translations.label_costs_location.replace("%s",e)+'</label><input type="text" name="yoast_wcseo_local_pickup_location_cost['+o+']" placeholder="'+yoast_wcseo_local_translations.placeholder_costs_location+'" class="input-text regular-input" > <small>'+a.price+'</small></td><td><input class="location_rule_remove" type="button" class="button" value="'+yoast_wcseo_local_translations.label_remove+'"></td></tr>'),t(".location_rule_remove").unbind("click"),t(".location_rule_remove").on("click",yoast_remove_location)}}),t(".location_rule_remove").on("click",yoast_remove_location),t("#woocommerce_yoast_wcseo_local_pickup_enabled").on("click",function(o){t(this).is(":checked")&&(0==confirm(yoast_wcseo_local_translations.warning_enable_pickup)&&o.preventDefault())})});

},{}]},{},[1,2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvdmVuZG9yL21hcmtlcmNsdXN0ZXIuanMiLCJqcy9zcmMvd3Atc2VvLWxvY2FsLXNoaXBwaW5nLXNldHRpbmdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO2FDb0VBLFNBQVMsZ0JBQWdCLEVBQUssRUFBYSxHQU12QyxLQUFLLE9BQU8sZ0JBQWlCLE9BQU8sS0FBSyxhQUN6QyxLQUFLLEtBQU8sRUFNWixLQUFLLFNBQVcsR0FLaEIsS0FBSyxVQUFZLEdBRWpCLEtBQUssTUFBUSxDQUFDLEdBQUksR0FBSSxHQUFJLEdBQUksSUFLOUIsS0FBSyxRQUFVLEdBTWYsS0FBSyxRQUFTLEVBRWQsSUFBSSxFQUFVLEdBQWUsR0FNN0IsS0FBSyxVQUFZLEVBQUEsVUFBdUIsR0FLeEMsS0FBSyxnQkFBa0IsRUFBQSxvQkFBaUMsRUFPeEQsS0FBSyxTQUFXLEVBQUEsU0FBc0IsS0FFdEMsS0FBSyxRQUFVLEVBQUEsUUFBcUIsR0FNcEMsS0FBSyxXQUFhLEVBQUEsV0FDZCxLQUFLLDJCQU1ULEtBQUssZ0JBQWtCLEVBQUEsZ0JBQ25CLEtBQUssZ0NBTVQsS0FBSyxjQUFlLEVBRVUsTUFBMUIsRUFBQSxjQUNBLEtBQUssYUFBZSxFQUFBLGFBT3hCLEtBQUssZ0JBQWlCLEVBRVUsTUFBNUIsRUFBQSxnQkFDQSxLQUFLLGVBQWlCLEVBQUEsZUFHMUIsS0FBSyxlQUVMLEtBQUssT0FBTyxHQU1aLEtBQUssVUFBWSxLQUFLLEtBQUssVUFHM0IsSUFBSSxFQUFPLEtBQ1gsT0FBTyxLQUFLLE1BQU0sWUFBWSxLQUFLLEtBQU0sZUFBZ0IsV0FFckQsSUFBSSxFQUFPLEVBQUssS0FBSyxVQUNqQixFQUFVLEVBQUssS0FBSyxTQUFXLEVBQy9CLEVBQVUsS0FBSyxJQUFJLEVBQUssS0FBSyxTQUFXLElBQ3hDLEVBQUssS0FBSyxTQUFTLEVBQUssS0FBSyxnQkFBZ0IsU0FDakQsRUFBTyxL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U0FDbEMsRUFBRSx5QkFBeUIsR0FBRyxRQUFTLDBCQUszQyxFQUFFLHlCQUF5QixHQUFHLFFBQVMsdUJBR3ZDLEVBQUUsaURBQWlELEdBQUcsUUFBUyxTQUFVLEdBQ3pELEVBQUUsTUFFSixHQUFHLGNBRUwsR0FEUyxRQUFRLCtCQUErQix3QkFFaEQsRUFBRSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8vID09Q2xvc3VyZUNvbXBpbGVyPT1cbi8vIEBjb21waWxhdGlvbl9sZXZlbCBBRFZBTkNFRF9PUFRJTUlaQVRJT05TXG4vLyBAZXh0ZXJuc191cmwgaHR0cDovL2Nsb3N1cmUtY29tcGlsZXIuZ29vZ2xlY29kZS5jb20vc3ZuL3RydW5rL2NvbnRyaWIvZXh0ZXJucy9tYXBzL2dvb2dsZV9tYXBzX2FwaV92M18zLmpzXG4vLyA9PS9DbG9zdXJlQ29tcGlsZXI9PVxuXG4vKipcbiAqIEBuYW1lIE1hcmtlckNsdXN0ZXJlciBmb3IgR29vZ2xlIE1hcHMgdjNcbiAqIEB2ZXJzaW9uIHZlcnNpb24gMS4wLjFcbiAqIEBhdXRob3IgTHVrZSBNYWhlXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKiBUaGUgbGlicmFyeSBjcmVhdGVzIGFuZCBtYW5hZ2VzIHBlci16b29tLWxldmVsIGNsdXN0ZXJzIGZvciBsYXJnZSBhbW91bnRzIG9mXG4gKiBtYXJrZXJzLlxuICogPGJyLz5cbiAqIFRoaXMgaXMgYSB2MyBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAqIDxhIGhyZWY9XCJodHRwOi8vZ21hcHMtdXRpbGl0eS1saWJyYXJ5LWRldi5nb29nbGVjb2RlLmNvbS9zdm4vdGFncy9tYXJrZXJjbHVzdGVyZXIvXCJcbiAqID52MiBNYXJrZXJDbHVzdGVyZXI8L2E+LlxuICovXG5cbi8qKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBBIE1hcmtlciBDbHVzdGVyZXIgdGhhdCBjbHVzdGVycyBtYXJrZXJzLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFwfSBtYXAgVGhlIEdvb2dsZSBtYXAgdG8gYXR0YWNoIHRvLlxuICogQHBhcmFtIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPj19IG9wdF9tYXJrZXJzIE9wdGlvbmFsIG1hcmtlcnMgdG8gYWRkIHRvXG4gKiAgIHRoZSBjbHVzdGVyLlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfb3B0aW9ucyBzdXBwb3J0IHRoZSBmb2xsb3dpbmcgb3B0aW9uczpcbiAqICAgICAnZ3JpZFNpemUnOiAobnVtYmVyKSBUaGUgZ3JpZCBzaXplIG9mIGEgY2x1c3RlciBpbiBwaXhlbHMuXG4gKiAgICAgJ21heFpvb20nOiAobnVtYmVyKSBUaGUgbWF4aW11bSB6b29tIGxldmVsIHRoYXQgYSBtYXJrZXIgY2FuIGJlIHBhcnQgb2YgYVxuICogICAgICAgICAgICAgICAgY2x1c3Rlci5cbiAqICAgICAnem9vbU9uQ2xpY2snOiAoYm9vbGVhbikgV2hldGhlciB0aGUgZGVmYXVsdCBiZWhhdmlvdXIgb2YgY2xpY2tpbmcgb24gYVxuICogICAgICAgICAgICAgICAgICAgIGNsdXN0ZXIgaXMgdG8gem9vbSBpbnRvIGl0LlxuICogICAgICdpbWFnZVBhdGgnOiAoc3RyaW5nKSBUaGUgYmFzZSBVUkwgd2hlcmUgdGhlIGltYWdlcyByZXByZXNlbnRpbmdcbiAqICAgICAgICAgICAgICAgICAgY2x1c3RlcnMgd2lsbCBiZSBmb3VuZC4gVGhlIGZ1bGwgVVJMIHdpbGwgYmU6XG4gKiAgICAgICAgICAgICAgICAgIHtpbWFnZVBhdGh9WzEtNV0ue2ltYWdlRXh0ZW5zaW9ufVxuICogICAgICAgICAgICAgICAgICBEZWZhdWx0OiAnLi4vaW1hZ2VzL20nLlxuICogICAgICdpbWFnZUV4dGVuc2lvbic6IChzdHJpbmcpIFRoZSBzdWZmaXggZm9yIGltYWdlcyBVUkwgcmVwcmVzZW50aW5nXG4gKiAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlcnMgd2lsbCBiZSBmb3VuZC4gU2VlIF9pbWFnZVBhdGhfIGZvciBkZXRhaWxzLlxuICogICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHQ6ICdwbmcnLlxuICogICAgICdhdmVyYWdlQ2VudGVyJzogKGJvb2xlYW4pIFdoZXRoZXIgdGhlIGNlbnRlciBvZiBlYWNoIGNsdXN0ZXIgc2hvdWxkIGJlXG4gKiAgICAgICAgICAgICAgICAgICAgICB0aGUgYXZlcmFnZSBvZiBhbGwgbWFya2VycyBpbiB0aGUgY2x1c3Rlci5cbiAqICAgICAnbWluaW11bUNsdXN0ZXJTaXplJzogKG51bWJlcikgVGhlIG1pbmltdW0gbnVtYmVyIG9mIG1hcmtlcnMgdG8gYmUgaW4gYVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVyIGJlZm9yZSB0aGUgbWFya2VycyBhcmUgaGlkZGVuIGFuZCBhIGNvdW50XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIHNob3duLlxuICogICAgICdzdHlsZXMnOiAob2JqZWN0KSBBbiBvYmplY3QgdGhhdCBoYXMgc3R5bGUgcHJvcGVydGllczpcbiAqICAgICAgICd1cmwnOiAoc3RyaW5nKSBUaGUgaW1hZ2UgdXJsLlxuICogICAgICAgJ2hlaWdodCc6IChudW1iZXIpIFRoZSBpbWFnZSBoZWlnaHQuXG4gKiAgICAgICAnd2lkdGgnOiAobnVtYmVyKSBUaGUgaW1hZ2Ugd2lkdGguXG4gKiAgICAgICAnYW5jaG9yJzogKEFycmF5KSBUaGUgYW5jaG9yIHBvc2l0aW9uIG9mIHRoZSBsYWJlbCB0ZXh0LlxuICogICAgICAgJ3RleHRDb2xvcic6IChzdHJpbmcpIFRoZSB0ZXh0IGNvbG9yLlxuICogICAgICAgJ3RleHRTaXplJzogKG51bWJlcikgVGhlIHRleHQgc2l6ZS5cbiAqICAgICAgICdiYWNrZ3JvdW5kUG9zaXRpb24nOiAoc3RyaW5nKSBUaGUgcG9zaXRpb24gb2YgdGhlIGJhY2tnb3VuZCB4LCB5LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBnb29nbGUubWFwcy5PdmVybGF5Vmlld1xuICovXG5mdW5jdGlvbiBNYXJrZXJDbHVzdGVyZXIobWFwLCBvcHRfbWFya2Vycywgb3B0X29wdGlvbnMpIHtcbiAgICAvLyBNYXJrZXJDbHVzdGVyZXIgaW1wbGVtZW50cyBnb29nbGUubWFwcy5PdmVybGF5VmlldyBpbnRlcmZhY2UuIFdlIHVzZSB0aGVcbiAgICAvLyBleHRlbmQgZnVuY3Rpb24gdG8gZXh0ZW5kIE1hcmtlckNsdXN0ZXJlciB3aXRoIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3XG4gICAgLy8gYmVjYXVzZSBpdCBtaWdodCBub3QgYWx3YXlzIGJlIGF2YWlsYWJsZSB3aGVuIHRoZSBjb2RlIGlzIGRlZmluZWQgc28gd2VcbiAgICAvLyBsb29rIGZvciBpdCBhdCB0aGUgbGFzdCBwb3NzaWJsZSBtb21lbnQuIElmIGl0IGRvZXNuJ3QgZXhpc3Qgbm93IHRoZW5cbiAgICAvLyB0aGVyZSBpcyBubyBwb2ludCBnb2luZyBhaGVhZCA6KVxuICAgIHRoaXMuZXh0ZW5kKE1hcmtlckNsdXN0ZXJlciwgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcpO1xuICAgIHRoaXMubWFwXyA9IG1hcDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheS48Z29vZ2xlLm1hcHMuTWFya2VyPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubWFya2Vyc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqICBAdHlwZSB7QXJyYXkuPENsdXN0ZXI+fVxuICAgICAqL1xuICAgIHRoaXMuY2x1c3RlcnNfID0gW107XG5cbiAgICB0aGlzLnNpemVzID0gWzUzLCA1NiwgNjYsIDc4LCA5MF07XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc3R5bGVzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlYWR5XyA9IGZhbHNlO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmdyaWRTaXplXyA9IG9wdGlvbnNbJ2dyaWRTaXplJ10gfHwgNjA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubWluQ2x1c3RlclNpemVfID0gb3B0aW9uc1snbWluaW11bUNsdXN0ZXJTaXplJ10gfHwgMjtcblxuXG4gICAgLyoqXG4gICAgICogQHR5cGUgez9udW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1heFpvb21fID0gb3B0aW9uc1snbWF4Wm9vbSddIHx8IG51bGw7XG5cbiAgICB0aGlzLnN0eWxlc18gPSBvcHRpb25zWydzdHlsZXMnXSB8fCBbXTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmltYWdlUGF0aF8gPSBvcHRpb25zWydpbWFnZVBhdGgnXSB8fFxuICAgICAgICB0aGlzLk1BUktFUl9DTFVTVEVSX0lNQUdFX1BBVEhfO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VFeHRlbnNpb25fID0gb3B0aW9uc1snaW1hZ2VFeHRlbnNpb24nXSB8fFxuICAgICAgICB0aGlzLk1BUktFUl9DTFVTVEVSX0lNQUdFX0VYVEVOU0lPTl87XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuem9vbU9uQ2xpY2tfID0gdHJ1ZTtcblxuICAgIGlmIChvcHRpb25zWyd6b29tT25DbGljayddICE9IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnpvb21PbkNsaWNrXyA9IG9wdGlvbnNbJ3pvb21PbkNsaWNrJ107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmF2ZXJhZ2VDZW50ZXJfID0gZmFsc2U7XG5cbiAgICBpZiAob3B0aW9uc1snYXZlcmFnZUNlbnRlciddICE9IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmF2ZXJhZ2VDZW50ZXJfID0gb3B0aW9uc1snYXZlcmFnZUNlbnRlciddO1xuICAgIH1cblxuICAgIHRoaXMuc2V0dXBTdHlsZXNfKCk7XG5cbiAgICB0aGlzLnNldE1hcChtYXApO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucHJldlpvb21fID0gdGhpcy5tYXBfLmdldFpvb20oKTtcblxuICAgIC8vIEFkZCB0aGUgbWFwIGV2ZW50IGxpc3RlbmVyc1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLm1hcF8sICd6b29tX2NoYW5nZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gRGV0ZXJtaW5lcyBtYXAgdHlwZSBhbmQgcHJldmVudCBpbGxlZ2FsIHpvb20gbGV2ZWxzXG4gICAgICAgIHZhciB6b29tID0gdGhhdC5tYXBfLmdldFpvb20oKTtcbiAgICAgICAgdmFyIG1pblpvb20gPSB0aGF0Lm1hcF8ubWluWm9vbSB8fCAwO1xuICAgICAgICB2YXIgbWF4Wm9vbSA9IE1hdGgubWluKHRoYXQubWFwXy5tYXhab29tIHx8IDEwMCxcbiAgICAgICAgICAgIHRoYXQubWFwXy5tYXBUeXBlc1t0aGF0Lm1hcF8uZ2V0TWFwVHlwZUlkKCldLm1heFpvb20pO1xuICAgICAgICB6b29tID0gTWF0aC5taW4oTWF0aC5tYXgoem9vbSxtaW5ab29tKSxtYXhab29tKTtcblxuICAgICAgICBpZiAodGhhdC5wcmV2Wm9vbV8gIT0gem9vbSkge1xuICAgICAgICAgICAgdGhhdC5wcmV2Wm9vbV8gPSB6b29tO1xuICAgICAgICAgICAgdGhhdC5yZXNldFZpZXdwb3J0KCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMubWFwXywgJ2lkbGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC5yZWRyYXcoKTtcbiAgICB9KTtcblxuICAgIC8vIEZpbmFsbHksIGFkZCB0aGUgbWFya2Vyc1xuICAgIGlmIChvcHRfbWFya2VycyAmJiAob3B0X21hcmtlcnMubGVuZ3RoIHx8IE9iamVjdC5rZXlzKG9wdF9tYXJrZXJzKS5sZW5ndGgpKSB7XG4gICAgICAgIHRoaXMuYWRkTWFya2VycyhvcHRfbWFya2VycywgZmFsc2UpO1xuICAgIH1cbn1cblxuXG4vKipcbiAqIFRoZSBtYXJrZXIgY2x1c3RlciBpbWFnZSBwYXRoLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLk1BUktFUl9DTFVTVEVSX0lNQUdFX1BBVEhfID0gJy4uL2ltYWdlcy9tJztcblxuXG4vKipcbiAqIFRoZSBtYXJrZXIgY2x1c3RlciBpbWFnZSBwYXRoLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLk1BUktFUl9DTFVTVEVSX0lNQUdFX0VYVEVOU0lPTl8gPSAncG5nJztcblxuXG4vKipcbiAqIEV4dGVuZHMgYSBvYmplY3RzIHByb3RvdHlwZSBieSBhbm90aGVycy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkLlxuICogQHBhcmFtIHtPYmplY3R9IG9iajIgVGhlIG9iamVjdCB0byBleHRlbmQgd2l0aC5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIG5ldyBleHRlbmRlZCBvYmplY3QuXG4gKiBAaWdub3JlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24ob2JqMSwgb2JqMikge1xuICAgIHJldHVybiAoZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvdG90eXBlW3Byb3BlcnR5XSA9IG9iamVjdC5wcm90b3R5cGVbcHJvcGVydHldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0pLmFwcGx5KG9iajEsIFtvYmoyXSk7XG59O1xuXG5cbi8qKlxuICogSW1wbGVtZW50YWlvbiBvZiB0aGUgaW50ZXJmYWNlIG1ldGhvZC5cbiAqIEBpZ25vcmVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5vbkFkZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0UmVhZHlfKHRydWUpO1xufTtcblxuLyoqXG4gKiBJbXBsZW1lbnRhaW9uIG9mIHRoZSBpbnRlcmZhY2UgbWV0aG9kLlxuICogQGlnbm9yZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHt9O1xuXG4vKipcbiAqIFNldHMgdXAgdGhlIHN0eWxlcyBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXR1cFN0eWxlc18gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5zdHlsZXNfLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDAsIHNpemU7IHNpemUgPSB0aGlzLnNpemVzW2ldOyBpKyspIHtcbiAgICAgICAgdGhpcy5zdHlsZXNfLnB1c2goe1xuICAgICAgICAgICAgdXJsOiB0aGlzLmltYWdlUGF0aF8gKyAoaSArIDEpICsgJy4nICsgdGhpcy5pbWFnZUV4dGVuc2lvbl8sXG4gICAgICAgICAgICBoZWlnaHQ6IHNpemUsXG4gICAgICAgICAgICB3aWR0aDogc2l6ZVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG4vKipcbiAqICBGaXQgdGhlIG1hcCB0byB0aGUgYm91bmRzIG9mIHRoZSBtYXJrZXJzIGluIHRoZSBjbHVzdGVyZXIuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZml0TWFwVG9NYXJrZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1hcmtlcnMgPSB0aGlzLmdldE1hcmtlcnMoKTtcbiAgICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbaV07IGkrKykge1xuICAgICAgICBib3VuZHMuZXh0ZW5kKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbiAgICB9XG5cbiAgICB0aGlzLm1hcF8uZml0Qm91bmRzKGJvdW5kcyk7XG59O1xuXG5cbi8qKlxuICogIFNldHMgdGhlIHN0eWxlcy5cbiAqXG4gKiAgQHBhcmFtIHtPYmplY3R9IHN0eWxlcyBUaGUgc3R5bGUgdG8gc2V0LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldFN0eWxlcyA9IGZ1bmN0aW9uKHN0eWxlcykge1xuICAgIHRoaXMuc3R5bGVzXyA9IHN0eWxlcztcbn07XG5cblxuLyoqXG4gKiAgR2V0cyB0aGUgc3R5bGVzLlxuICpcbiAqICBAcmV0dXJuIHtPYmplY3R9IFRoZSBzdHlsZXMgb2JqZWN0LlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldFN0eWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN0eWxlc187XG59O1xuXG5cbi8qKlxuICogV2hldGhlciB6b29tIG9uIGNsaWNrIGlzIHNldC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHpvb21PbkNsaWNrXyBpcyBzZXQuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuaXNab29tT25DbGljayA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnpvb21PbkNsaWNrXztcbn07XG5cbi8qKlxuICogV2hldGhlciBhdmVyYWdlIGNlbnRlciBpcyBzZXQuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhdmVyYWdlQ2VudGVyXyBpcyBzZXQuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuaXNBdmVyYWdlQ2VudGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXZlcmFnZUNlbnRlcl87XG59O1xuXG5cbi8qKlxuICogIFJldHVybnMgdGhlIGFycmF5IG9mIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXJlci5cbiAqXG4gKiAgQHJldHVybiB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IFRoZSBtYXJrZXJzLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tYXJrZXJzXztcbn07XG5cblxuLyoqXG4gKiAgUmV0dXJucyB0aGUgbnVtYmVyIG9mIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXJlclxuICpcbiAqICBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBudW1iZXIgb2YgbWFya2Vycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRUb3RhbE1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tYXJrZXJzXy5sZW5ndGg7XG59O1xuXG5cbi8qKlxuICogIFNldHMgdGhlIG1heCB6b29tIGZvciB0aGUgY2x1c3RlcmVyLlxuICpcbiAqICBAcGFyYW0ge251bWJlcn0gbWF4Wm9vbSBUaGUgbWF4IHpvb20gbGV2ZWwuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0TWF4Wm9vbSA9IGZ1bmN0aW9uKG1heFpvb20pIHtcbiAgICB0aGlzLm1heFpvb21fID0gbWF4Wm9vbTtcbn07XG5cblxuLyoqXG4gKiAgR2V0cyB0aGUgbWF4IHpvb20gZm9yIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogIEByZXR1cm4ge251bWJlcn0gVGhlIG1heCB6b29tIGxldmVsLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tYXhab29tXztcbn07XG5cblxuLyoqXG4gKiAgVGhlIGZ1bmN0aW9uIGZvciBjYWxjdWxhdGluZyB0aGUgY2x1c3RlciBpY29uIGltYWdlLlxuICpcbiAqICBAcGFyYW0ge0FycmF5Ljxnb29nbGUubWFwcy5NYXJrZXI+fSBtYXJrZXJzIFRoZSBtYXJrZXJzIGluIHRoZSBjbHVzdGVyZXIuXG4gKiAgQHBhcmFtIHtudW1iZXJ9IG51bVN0eWxlcyBUaGUgbnVtYmVyIG9mIHN0eWxlcyBhdmFpbGFibGUuXG4gKiAgQHJldHVybiB7T2JqZWN0fSBBIG9iamVjdCBwcm9wZXJ0aWVzOiAndGV4dCcgKHN0cmluZykgYW5kICdpbmRleCcgKG51bWJlcikuXG4gKiAgQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5jYWxjdWxhdG9yXyA9IGZ1bmN0aW9uKG1hcmtlcnMsIG51bVN0eWxlcykge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGNvdW50ID0gbWFya2Vycy5sZW5ndGg7XG4gICAgdmFyIGR2ID0gY291bnQ7XG4gICAgd2hpbGUgKGR2ICE9PSAwKSB7XG4gICAgICAgIGR2ID0gcGFyc2VJbnQoZHYgLyAxMCwgMTApO1xuICAgICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIGluZGV4ID0gTWF0aC5taW4oaW5kZXgsIG51bVN0eWxlcyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGV4dDogY291bnQsXG4gICAgICAgIGluZGV4OiBpbmRleFxuICAgIH07XG59O1xuXG5cbi8qKlxuICogU2V0IHRoZSBjYWxjdWxhdG9yIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oQXJyYXksIG51bWJlcil9IGNhbGN1bGF0b3IgVGhlIGZ1bmN0aW9uIHRvIHNldCBhcyB0aGVcbiAqICAgICBjYWxjdWxhdG9yLiBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG9iamVjdCBwcm9wZXJ0aWVzOlxuICogICAgICd0ZXh0JyAoc3RyaW5nKSBhbmQgJ2luZGV4JyAobnVtYmVyKS5cbiAqXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0Q2FsY3VsYXRvciA9IGZ1bmN0aW9uKGNhbGN1bGF0b3IpIHtcbiAgICB0aGlzLmNhbGN1bGF0b3JfID0gY2FsY3VsYXRvcjtcbn07XG5cblxuLyoqXG4gKiBHZXQgdGhlIGNhbGN1bGF0b3IgZnVuY3Rpb24uXG4gKlxuICogQHJldHVybiB7ZnVuY3Rpb24oQXJyYXksIG51bWJlcil9IHRoZSBjYWxjdWxhdG9yIGZ1bmN0aW9uLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldENhbGN1bGF0b3IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxjdWxhdG9yXztcbn07XG5cblxuLyoqXG4gKiBBZGQgYW4gYXJyYXkgb2YgbWFya2VycyB0byB0aGUgY2x1c3RlcmVyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IG1hcmtlcnMgVGhlIG1hcmtlcnMgdG8gYWRkLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vZHJhdyBXaGV0aGVyIHRvIHJlZHJhdyB0aGUgY2x1c3RlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuYWRkTWFya2VycyA9IGZ1bmN0aW9uKG1hcmtlcnMsIG9wdF9ub2RyYXcpIHtcbiAgICBpZiAobWFya2Vycy5sZW5ndGgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gbWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2hNYXJrZXJUb18obWFya2VyKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoT2JqZWN0LmtleXMobWFya2VycykubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIG1hcmtlciBpbiBtYXJrZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2hNYXJrZXJUb18obWFya2Vyc1ttYXJrZXJdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW9wdF9ub2RyYXcpIHtcbiAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICB9XG59O1xuXG5cbi8qKlxuICogUHVzaGVzIGEgbWFya2VyIHRvIHRoZSBjbHVzdGVyZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGFkZC5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucHVzaE1hcmtlclRvXyA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICAgIG1hcmtlci5pc0FkZGVkID0gZmFsc2U7XG4gICAgaWYgKG1hcmtlclsnZHJhZ2dhYmxlJ10pIHtcbiAgICAgICAgLy8gSWYgdGhlIG1hcmtlciBpcyBkcmFnZ2FibGUgYWRkIGEgbGlzdGVuZXIgc28gd2UgdXBkYXRlIHRoZSBjbHVzdGVycyBvblxuICAgICAgICAvLyB0aGUgZHJhZyBlbmQuXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnZHJhZ2VuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbWFya2VyLmlzQWRkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoYXQucmVwYWludCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5tYXJrZXJzXy5wdXNoKG1hcmtlcik7XG59O1xuXG5cbi8qKlxuICogQWRkcyBhIG1hcmtlciB0byB0aGUgY2x1c3RlcmVyIGFuZCByZWRyYXdzIGlmIG5lZWRlZC5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gYWRkLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vZHJhdyBXaGV0aGVyIHRvIHJlZHJhdyB0aGUgY2x1c3RlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuYWRkTWFya2VyID0gZnVuY3Rpb24obWFya2VyLCBvcHRfbm9kcmF3KSB7XG4gICAgdGhpcy5wdXNoTWFya2VyVG9fKG1hcmtlcik7XG4gICAgaWYgKCFvcHRfbm9kcmF3KSB7XG4gICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgfVxufTtcblxuXG4vKipcbiAqIFJlbW92ZXMgYSBtYXJrZXIgYW5kIHJldHVybnMgdHJ1ZSBpZiByZW1vdmVkLCBmYWxzZSBpZiBub3RcbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gcmVtb3ZlXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBtYXJrZXIgd2FzIHJlbW92ZWQgb3Igbm90XG4gKiBAcHJpdmF0ZVxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlbW92ZU1hcmtlcl8gPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgICB2YXIgaW5kZXggPSAtMTtcbiAgICBpZiAodGhpcy5tYXJrZXJzXy5pbmRleE9mKSB7XG4gICAgICAgIGluZGV4ID0gdGhpcy5tYXJrZXJzXy5pbmRleE9mKG1hcmtlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG07IG0gPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChtID09IG1hcmtlcikge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpbmRleCA9PSAtMSkge1xuICAgICAgICAvLyBNYXJrZXIgaXMgbm90IGluIG91ciBsaXN0IG9mIG1hcmtlcnMuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuXG4gICAgdGhpcy5tYXJrZXJzXy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlIGEgbWFya2VyIGZyb20gdGhlIGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIHJlbW92ZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2RyYXcgT3B0aW9uYWwgYm9vbGVhbiB0byBmb3JjZSBubyByZWRyYXcuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgd2FzIHJlbW92ZWQuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVtb3ZlTWFya2VyID0gZnVuY3Rpb24obWFya2VyLCBvcHRfbm9kcmF3KSB7XG4gICAgdmFyIHJlbW92ZWQgPSB0aGlzLnJlbW92ZU1hcmtlcl8obWFya2VyKTtcblxuICAgIGlmICghb3B0X25vZHJhdyAmJiByZW1vdmVkKSB7XG4gICAgICAgIHRoaXMucmVzZXRWaWV3cG9ydCgpO1xuICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblxuXG4vKipcbiAqIFJlbW92ZXMgYW4gYXJyYXkgb2YgbWFya2VycyBmcm9tIHRoZSBjbHVzdGVyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IG1hcmtlcnMgVGhlIG1hcmtlcnMgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vZHJhdyBPcHRpb25hbCBib29sZWFuIHRvIGZvcmNlIG5vIHJlZHJhdy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZW1vdmVNYXJrZXJzID0gZnVuY3Rpb24obWFya2Vycywgb3B0X25vZHJhdykge1xuICAgIC8vIGNyZWF0ZSBhIGxvY2FsIGNvcHkgb2YgbWFya2VycyBpZiByZXF1aXJlZFxuICAgIC8vIChyZW1vdmVNYXJrZXJfIG1vZGlmaWVzIHRoZSBnZXRNYXJrZXJzKCkgYXJyYXkgaW4gcGxhY2UpXG4gICAgdmFyIG1hcmtlcnNDb3B5ID0gbWFya2VycyA9PT0gdGhpcy5nZXRNYXJrZXJzKCkgPyBtYXJrZXJzLnNsaWNlKCkgOiBtYXJrZXJzO1xuICAgIHZhciByZW1vdmVkID0gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzQ29weVtpXTsgaSsrKSB7XG4gICAgICAgIHZhciByID0gdGhpcy5yZW1vdmVNYXJrZXJfKG1hcmtlcik7XG4gICAgICAgIHJlbW92ZWQgPSByZW1vdmVkIHx8IHI7XG4gICAgfVxuXG4gICAgaWYgKCFvcHRfbm9kcmF3ICYmIHJlbW92ZWQpIHtcbiAgICAgICAgdGhpcy5yZXNldFZpZXdwb3J0KCk7XG4gICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBjbHVzdGVyZXIncyByZWFkeSBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHJlYWR5IFRoZSBzdGF0ZS5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuc2V0UmVhZHlfID0gZnVuY3Rpb24ocmVhZHkpIHtcbiAgICBpZiAoIXRoaXMucmVhZHlfKSB7XG4gICAgICAgIHRoaXMucmVhZHlfID0gcmVhZHk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2x1c3RlcnNfKCk7XG4gICAgfVxufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIG51bWJlciBvZiBjbHVzdGVycyBpbiB0aGUgY2x1c3RlcmVyLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBjbHVzdGVycy5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRUb3RhbENsdXN0ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2x1c3RlcnNfLmxlbmd0aDtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBnb29nbGUgbWFwIHRoYXQgdGhlIGNsdXN0ZXJlciBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuTWFwfSBUaGUgbWFwLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hcF87XG59O1xuXG5cbi8qKlxuICogU2V0cyB0aGUgZ29vZ2xlIG1hcCB0aGF0IHRoZSBjbHVzdGVyZXIgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFwfSBtYXAgVGhlIG1hcC5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbihtYXApIHtcbiAgICB0aGlzLm1hcF8gPSBtYXA7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgZ3JpZC5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBncmlkIHNpemUuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0R3JpZFNpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5ncmlkU2l6ZV87XG59O1xuXG5cbi8qKlxuICogU2V0cyB0aGUgc2l6ZSBvZiB0aGUgZ3JpZC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBUaGUgZ3JpZCBzaXplLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldEdyaWRTaXplID0gZnVuY3Rpb24oc2l6ZSkge1xuICAgIHRoaXMuZ3JpZFNpemVfID0gc2l6ZTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW4gY2x1c3RlciBzaXplLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGdyaWQgc2l6ZS5cbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNaW5DbHVzdGVyU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1pbkNsdXN0ZXJTaXplXztcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgbWluIGNsdXN0ZXIgc2l6ZS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBUaGUgZ3JpZCBzaXplLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnNldE1pbkNsdXN0ZXJTaXplID0gZnVuY3Rpb24oc2l6ZSkge1xuICAgIHRoaXMubWluQ2x1c3RlclNpemVfID0gc2l6ZTtcbn07XG5cblxuLyoqXG4gKiBFeHRlbmRzIGEgYm91bmRzIG9iamVjdCBieSB0aGUgZ3JpZCBzaXplLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzfSBib3VuZHMgVGhlIGJvdW5kcyB0byBleHRlbmQuXG4gKiBAcmV0dXJuIHtnb29nbGUubWFwcy5MYXRMbmdCb3VuZHN9IFRoZSBleHRlbmRlZCBib3VuZHMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0RXh0ZW5kZWRCb3VuZHMgPSBmdW5jdGlvbihib3VuZHMpIHtcbiAgICB2YXIgcHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuXG4gICAgLy8gVHVybiB0aGUgYm91bmRzIGludG8gbGF0bG5nLlxuICAgIHZhciB0ciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYm91bmRzLmdldE5vcnRoRWFzdCgpLmxhdCgpLFxuICAgICAgICBib3VuZHMuZ2V0Tm9ydGhFYXN0KCkubG5nKCkpO1xuICAgIHZhciBibCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYm91bmRzLmdldFNvdXRoV2VzdCgpLmxhdCgpLFxuICAgICAgICBib3VuZHMuZ2V0U291dGhXZXN0KCkubG5nKCkpO1xuXG4gICAgLy8gQ29udmVydCB0aGUgcG9pbnRzIHRvIHBpeGVscyBhbmQgdGhlIGV4dGVuZCBvdXQgYnkgdGhlIGdyaWQgc2l6ZS5cbiAgICB2YXIgdHJQaXggPSBwcm9qZWN0aW9uLmZyb21MYXRMbmdUb0RpdlBpeGVsKHRyKTtcbiAgICB0clBpeC54ICs9IHRoaXMuZ3JpZFNpemVfO1xuICAgIHRyUGl4LnkgLT0gdGhpcy5ncmlkU2l6ZV87XG5cbiAgICB2YXIgYmxQaXggPSBwcm9qZWN0aW9uLmZyb21MYXRMbmdUb0RpdlBpeGVsKGJsKTtcbiAgICBibFBpeC54IC09IHRoaXMuZ3JpZFNpemVfO1xuICAgIGJsUGl4LnkgKz0gdGhpcy5ncmlkU2l6ZV87XG5cbiAgICAvLyBDb252ZXJ0IHRoZSBwaXhlbCBwb2ludHMgYmFjayB0byBMYXRMbmdcbiAgICB2YXIgbmUgPSBwcm9qZWN0aW9uLmZyb21EaXZQaXhlbFRvTGF0TG5nKHRyUGl4KTtcbiAgICB2YXIgc3cgPSBwcm9qZWN0aW9uLmZyb21EaXZQaXhlbFRvTGF0TG5nKGJsUGl4KTtcblxuICAgIC8vIEV4dGVuZCB0aGUgYm91bmRzIHRvIGNvbnRhaW4gdGhlIG5ldyBib3VuZHMuXG4gICAgYm91bmRzLmV4dGVuZChuZSk7XG4gICAgYm91bmRzLmV4dGVuZChzdyk7XG5cbiAgICByZXR1cm4gYm91bmRzO1xufTtcblxuXG4vKipcbiAqIERldGVybWlucyBpZiBhIG1hcmtlciBpcyBjb250YWluZWQgaW4gYSBib3VuZHMuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGNoZWNrLlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5MYXRMbmdCb3VuZHN9IGJvdW5kcyBUaGUgYm91bmRzIHRvIGNoZWNrIGFnYWluc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBtYXJrZXIgaXMgaW4gdGhlIGJvdW5kcy5cbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuaXNNYXJrZXJJbkJvdW5kc18gPSBmdW5jdGlvbihtYXJrZXIsIGJvdW5kcykge1xuICAgIHJldHVybiBib3VuZHMuY29udGFpbnMobWFya2VyLmdldFBvc2l0aW9uKCkpO1xufTtcblxuXG4vKipcbiAqIENsZWFycyBhbGwgY2x1c3RlcnMgYW5kIG1hcmtlcnMgZnJvbSB0aGUgY2x1c3RlcmVyLlxuICovXG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmNsZWFyTWFya2VycyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVzZXRWaWV3cG9ydCh0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgbWFya2VycyBhIGVtcHR5IGFycmF5LlxuICAgIHRoaXMubWFya2Vyc18gPSBbXTtcbn07XG5cblxuLyoqXG4gKiBDbGVhcnMgYWxsIGV4aXN0aW5nIGNsdXN0ZXJzIGFuZCByZWNyZWF0ZXMgdGhlbS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X2hpZGUgVG8gYWxzbyBoaWRlIHRoZSBtYXJrZXIuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVzZXRWaWV3cG9ydCA9IGZ1bmN0aW9uKG9wdF9oaWRlKSB7XG4gICAgLy8gUmVtb3ZlIGFsbCB0aGUgY2x1c3RlcnNcbiAgICBmb3IgKHZhciBpID0gMCwgY2x1c3RlcjsgY2x1c3RlciA9IHRoaXMuY2x1c3RlcnNfW2ldOyBpKyspIHtcbiAgICAgICAgY2x1c3Rlci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvLyBSZXNldCB0aGUgbWFya2VycyB0byBub3QgYmUgYWRkZWQgYW5kIHRvIGJlIGludmlzaWJsZS5cbiAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICAgICAgbWFya2VyLmlzQWRkZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG9wdF9oaWRlKSB7XG4gICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jbHVzdGVyc18gPSBbXTtcbn07XG5cbi8qKlxuICpcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZXBhaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9sZENsdXN0ZXJzID0gdGhpcy5jbHVzdGVyc18uc2xpY2UoKTtcbiAgICB0aGlzLmNsdXN0ZXJzXy5sZW5ndGggPSAwO1xuICAgIHRoaXMucmVzZXRWaWV3cG9ydCgpO1xuICAgIHRoaXMucmVkcmF3KCk7XG5cbiAgICAvLyBSZW1vdmUgdGhlIG9sZCBjbHVzdGVycy5cbiAgICAvLyBEbyBpdCBpbiBhIHRpbWVvdXQgc28gdGhlIG90aGVyIGNsdXN0ZXJzIGhhdmUgYmVlbiBkcmF3biBmaXJzdC5cbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGNsdXN0ZXI7IGNsdXN0ZXIgPSBvbGRDbHVzdGVyc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICBjbHVzdGVyLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfSwgMCk7XG59O1xuXG5cbi8qKlxuICogUmVkcmF3cyB0aGUgY2x1c3RlcnMuXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVkcmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jcmVhdGVDbHVzdGVyc18oKTtcbn07XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHR3byBsYXRsbmcgbG9jYXRpb25zIGluIGttLlxuICogQHNlZSBodHRwOi8vd3d3Lm1vdmFibGUtdHlwZS5jby51ay9zY3JpcHRzL2xhdGxvbmcuaHRtbFxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBwMSBUaGUgZmlyc3QgbGF0IGxuZyBwb2ludC5cbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBwMiBUaGUgc2Vjb25kIGxhdCBsbmcgcG9pbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gcG9pbnRzIGluIGttLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5kaXN0YW5jZUJldHdlZW5Qb2ludHNfID0gZnVuY3Rpb24ocDEsIHAyKSB7XG4gICAgaWYgKCFwMSB8fCAhcDIpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgdmFyIFIgPSA2MzcxOyAvLyBSYWRpdXMgb2YgdGhlIEVhcnRoIGluIGttXG4gICAgdmFyIGRMYXQgPSAocDIubGF0KCkgLSBwMS5sYXQoKSkgKiBNYXRoLlBJIC8gMTgwO1xuICAgIHZhciBkTG9uID0gKHAyLmxuZygpIC0gcDEubG5nKCkpICogTWF0aC5QSSAvIDE4MDtcbiAgICB2YXIgYSA9IE1hdGguc2luKGRMYXQgLyAyKSAqIE1hdGguc2luKGRMYXQgLyAyKSArXG4gICAgICAgIE1hdGguY29zKHAxLmxhdCgpICogTWF0aC5QSSAvIDE4MCkgKiBNYXRoLmNvcyhwMi5sYXQoKSAqIE1hdGguUEkgLyAxODApICpcbiAgICAgICAgTWF0aC5zaW4oZExvbiAvIDIpICogTWF0aC5zaW4oZExvbiAvIDIpO1xuICAgIHZhciBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMSAtIGEpKTtcbiAgICB2YXIgZCA9IFIgKiBjO1xuICAgIHJldHVybiBkO1xufTtcblxuXG4vKipcbiAqIEFkZCBhIG1hcmtlciB0byBhIGNsdXN0ZXIsIG9yIGNyZWF0ZXMgYSBuZXcgY2x1c3Rlci5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcmtlcn0gbWFya2VyIFRoZSBtYXJrZXIgdG8gYWRkLlxuICogQHByaXZhdGVcbiAqL1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5hZGRUb0Nsb3Nlc3RDbHVzdGVyXyA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICAgIHZhciBkaXN0YW5jZSA9IDQwMDAwOyAvLyBTb21lIGxhcmdlIG51bWJlclxuICAgIHZhciBjbHVzdGVyVG9BZGRUbyA9IG51bGw7XG4gICAgdmFyIHBvcyA9IG1hcmtlci5nZXRQb3NpdGlvbigpO1xuICAgIGZvciAodmFyIGkgPSAwLCBjbHVzdGVyOyBjbHVzdGVyID0gdGhpcy5jbHVzdGVyc19baV07IGkrKykge1xuICAgICAgICB2YXIgY2VudGVyID0gY2x1c3Rlci5nZXRDZW50ZXIoKTtcbiAgICAgICAgaWYgKGNlbnRlcikge1xuICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmRpc3RhbmNlQmV0d2VlblBvaW50c18oY2VudGVyLCBtYXJrZXIuZ2V0UG9zaXRpb24oKSk7XG4gICAgICAgICAgICBpZiAoZCA8IGRpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBkO1xuICAgICAgICAgICAgICAgIGNsdXN0ZXJUb0FkZFRvID0gY2x1c3RlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbHVzdGVyVG9BZGRUbyAmJiBjbHVzdGVyVG9BZGRUby5pc01hcmtlckluQ2x1c3RlckJvdW5kcyhtYXJrZXIpKSB7XG4gICAgICAgIGNsdXN0ZXJUb0FkZFRvLmFkZE1hcmtlcihtYXJrZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjbHVzdGVyID0gbmV3IENsdXN0ZXIodGhpcyk7XG4gICAgICAgIGNsdXN0ZXIuYWRkTWFya2VyKG1hcmtlcik7XG4gICAgICAgIHRoaXMuY2x1c3RlcnNfLnB1c2goY2x1c3Rlcik7XG4gICAgfVxufTtcblxuXG4vKipcbiAqIENyZWF0ZXMgdGhlIGNsdXN0ZXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuY3JlYXRlQ2x1c3RlcnNfID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLnJlYWR5Xykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2V0IG91ciBjdXJyZW50IG1hcCB2aWV3IGJvdW5kcy5cbiAgICAvLyBDcmVhdGUgYSBuZXcgYm91bmRzIG9iamVjdCBzbyB3ZSBkb24ndCBhZmZlY3QgdGhlIG1hcC5cbiAgICB2YXIgbWFwQm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyh0aGlzLm1hcF8uZ2V0Qm91bmRzKCkuZ2V0U291dGhXZXN0KCksXG4gICAgICAgIHRoaXMubWFwXy5nZXRCb3VuZHMoKS5nZXROb3J0aEVhc3QoKSk7XG4gICAgdmFyIGJvdW5kcyA9IHRoaXMuZ2V0RXh0ZW5kZWRCb3VuZHMobWFwQm91bmRzKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IHRoaXMubWFya2Vyc19baV07IGkrKykge1xuICAgICAgICBpZiAoIW1hcmtlci5pc0FkZGVkICYmIHRoaXMuaXNNYXJrZXJJbkJvdW5kc18obWFya2VyLCBib3VuZHMpKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRvQ2xvc2VzdENsdXN0ZXJfKG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5cbi8qKlxuICogQSBjbHVzdGVyIHRoYXQgY29udGFpbnMgbWFya2Vycy5cbiAqXG4gKiBAcGFyYW0ge01hcmtlckNsdXN0ZXJlcn0gbWFya2VyQ2x1c3RlcmVyIFRoZSBtYXJrZXJjbHVzdGVyZXIgdGhhdCB0aGlzXG4gKiAgICAgY2x1c3RlciBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gQ2x1c3RlcihtYXJrZXJDbHVzdGVyZXIpIHtcbiAgICB0aGlzLm1hcmtlckNsdXN0ZXJlcl8gPSBtYXJrZXJDbHVzdGVyZXI7XG4gICAgdGhpcy5tYXBfID0gbWFya2VyQ2x1c3RlcmVyLmdldE1hcCgpO1xuICAgIHRoaXMuZ3JpZFNpemVfID0gbWFya2VyQ2x1c3RlcmVyLmdldEdyaWRTaXplKCk7XG4gICAgdGhpcy5taW5DbHVzdGVyU2l6ZV8gPSBtYXJrZXJDbHVzdGVyZXIuZ2V0TWluQ2x1c3RlclNpemUoKTtcbiAgICB0aGlzLmF2ZXJhZ2VDZW50ZXJfID0gbWFya2VyQ2x1c3RlcmVyLmlzQXZlcmFnZUNlbnRlcigpO1xuICAgIHRoaXMuY2VudGVyXyA9IG51bGw7XG4gICAgdGhpcy5tYXJrZXJzXyA9IFtdO1xuICAgIHRoaXMuYm91bmRzXyA9IG51bGw7XG4gICAgdGhpcy5jbHVzdGVySWNvbl8gPSBuZXcgQ2x1c3Rlckljb24odGhpcywgbWFya2VyQ2x1c3RlcmVyLmdldFN0eWxlcygpLFxuICAgICAgICBtYXJrZXJDbHVzdGVyZXIuZ2V0R3JpZFNpemUoKSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5zIGlmIGEgbWFya2VyIGlzIGFscmVhZHkgYWRkZWQgdG8gdGhlIGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWFya2VyIGlzIGFscmVhZHkgYWRkZWQuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmlzTWFya2VyQWxyZWFkeUFkZGVkID0gZnVuY3Rpb24obWFya2VyKSB7XG4gICAgaWYgKHRoaXMubWFya2Vyc18uaW5kZXhPZikge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXJrZXJzXy5pbmRleE9mKG1hcmtlcikgIT0gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG07IG0gPSB0aGlzLm1hcmtlcnNfW2ldOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChtID09IG1hcmtlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cblxuLyoqXG4gKiBBZGQgYSBtYXJrZXIgdGhlIGNsdXN0ZXIuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGFkZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hcmtlciB3YXMgYWRkZWQuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmFkZE1hcmtlciA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICAgIGlmICh0aGlzLmlzTWFya2VyQWxyZWFkeUFkZGVkKG1hcmtlcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5jZW50ZXJfKSB7XG4gICAgICAgIHRoaXMuY2VudGVyXyA9IG1hcmtlci5nZXRQb3NpdGlvbigpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kc18oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5hdmVyYWdlQ2VudGVyXykge1xuICAgICAgICAgICAgdmFyIGwgPSB0aGlzLm1hcmtlcnNfLmxlbmd0aCArIDE7XG4gICAgICAgICAgICB2YXIgbGF0ID0gKHRoaXMuY2VudGVyXy5sYXQoKSAqIChsLTEpICsgbWFya2VyLmdldFBvc2l0aW9uKCkubGF0KCkpIC8gbDtcbiAgICAgICAgICAgIHZhciBsbmcgPSAodGhpcy5jZW50ZXJfLmxuZygpICogKGwtMSkgKyBtYXJrZXIuZ2V0UG9zaXRpb24oKS5sbmcoKSkgLyBsO1xuICAgICAgICAgICAgdGhpcy5jZW50ZXJfID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsYXQsIGxuZyk7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUJvdW5kc18oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG1hcmtlci5pc0FkZGVkID0gdHJ1ZTtcbiAgICB0aGlzLm1hcmtlcnNfLnB1c2gobWFya2VyKTtcblxuICAgIHZhciBsZW4gPSB0aGlzLm1hcmtlcnNfLmxlbmd0aDtcbiAgICBpZiAobGVuIDwgdGhpcy5taW5DbHVzdGVyU2l6ZV8gJiYgbWFya2VyLmdldE1hcCgpICE9IHRoaXMubWFwXykge1xuICAgICAgICAvLyBNaW4gY2x1c3RlciBzaXplIG5vdCByZWFjaGVkIHNvIHNob3cgdGhlIG1hcmtlci5cbiAgICAgICAgbWFya2VyLnNldE1hcCh0aGlzLm1hcF8pO1xuICAgIH1cblxuICAgIGlmIChsZW4gPT0gdGhpcy5taW5DbHVzdGVyU2l6ZV8pIHtcbiAgICAgICAgLy8gSGlkZSB0aGUgbWFya2VycyB0aGF0IHdlcmUgc2hvd2luZy5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tYXJrZXJzX1tpXS5zZXRNYXAobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobGVuID49IHRoaXMubWluQ2x1c3RlclNpemVfKSB7XG4gICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVJY29uKCk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWFya2VyIGNsdXN0ZXJlciB0aGF0IHRoZSBjbHVzdGVyIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqXG4gKiBAcmV0dXJuIHtNYXJrZXJDbHVzdGVyZXJ9IFRoZSBhc3NvY2lhdGVkIG1hcmtlciBjbHVzdGVyZXIuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldE1hcmtlckNsdXN0ZXJlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hcmtlckNsdXN0ZXJlcl87XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgYm91bmRzIG9mIHRoZSBjbHVzdGVyLlxuICpcbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLkxhdExuZ0JvdW5kc30gdGhlIGNsdXN0ZXIgYm91bmRzLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRCb3VuZHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyh0aGlzLmNlbnRlcl8sIHRoaXMuY2VudGVyXyk7XG4gICAgdmFyIG1hcmtlcnMgPSB0aGlzLmdldE1hcmtlcnMoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2ldOyBpKyspIHtcbiAgICAgICAgYm91bmRzLmV4dGVuZChtYXJrZXIuZ2V0UG9zaXRpb24oKSk7XG4gICAgfVxuICAgIHJldHVybiBib3VuZHM7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgY2x1c3RlclxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsdXN0ZXJJY29uXy5yZW1vdmUoKTtcbiAgICB0aGlzLm1hcmtlcnNfLmxlbmd0aCA9IDA7XG4gICAgZGVsZXRlIHRoaXMubWFya2Vyc187XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXIuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbnVtYmVyIG9mIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXIuXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tYXJrZXJzXy5sZW5ndGg7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyBhIGxpc3Qgb2YgdGhlIG1hcmtlcnMgaW4gdGhlIGNsdXN0ZXIuXG4gKlxuICogQHJldHVybiB7QXJyYXkuPGdvb2dsZS5tYXBzLk1hcmtlcj59IFRoZSBtYXJrZXJzIGluIHRoZSBjbHVzdGVyLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRNYXJrZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubWFya2Vyc187XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgY2VudGVyIG9mIHRoZSBjbHVzdGVyLlxuICpcbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLkxhdExuZ30gVGhlIGNsdXN0ZXIgY2VudGVyLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRDZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jZW50ZXJfO1xufTtcblxuXG4vKipcbiAqIENhbGN1bGF0ZWQgdGhlIGV4dGVuZGVkIGJvdW5kcyBvZiB0aGUgY2x1c3RlciB3aXRoIHRoZSBncmlkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbkNsdXN0ZXIucHJvdG90eXBlLmNhbGN1bGF0ZUJvdW5kc18gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyh0aGlzLmNlbnRlcl8sIHRoaXMuY2VudGVyXyk7XG4gICAgdGhpcy5ib3VuZHNfID0gdGhpcy5tYXJrZXJDbHVzdGVyZXJfLmdldEV4dGVuZGVkQm91bmRzKGJvdW5kcyk7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIG1hcmtlciBsaWVzIGluIHRoZSBjbHVzdGVycyBib3VuZHMuXG4gKlxuICogQHBhcmFtIHtnb29nbGUubWFwcy5NYXJrZXJ9IG1hcmtlciBUaGUgbWFya2VyIHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgbWFya2VyIGxpZXMgaW4gdGhlIGJvdW5kcy5cbiAqL1xuQ2x1c3Rlci5wcm90b3R5cGUuaXNNYXJrZXJJbkNsdXN0ZXJCb3VuZHMgPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgICByZXR1cm4gdGhpcy5ib3VuZHNfLmNvbnRhaW5zKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCB0aGUgY2x1c3RlciBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogQHJldHVybiB7Z29vZ2xlLm1hcHMuTWFwfSBUaGUgbWFwLlxuICovXG5DbHVzdGVyLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tYXBfO1xufTtcblxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGNsdXN0ZXIgaWNvblxuICovXG5DbHVzdGVyLnByb3RvdHlwZS51cGRhdGVJY29uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHpvb20gPSB0aGlzLm1hcF8uZ2V0Wm9vbSgpO1xuICAgIHZhciBteiA9IHRoaXMubWFya2VyQ2x1c3RlcmVyXy5nZXRNYXhab29tKCk7XG5cbiAgICBpZiAobXogJiYgem9vbSA+IG16KSB7XG4gICAgICAgIC8vIFRoZSB6b29tIGlzIGdyZWF0ZXIgdGhhbiBvdXIgbWF4IHpvb20gc28gc2hvdyBhbGwgdGhlIG1hcmtlcnMgaW4gY2x1c3Rlci5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gdGhpcy5tYXJrZXJzX1tpXTsgaSsrKSB7XG4gICAgICAgICAgICBtYXJrZXIuc2V0TWFwKHRoaXMubWFwXyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1hcmtlcnNfLmxlbmd0aCA8IHRoaXMubWluQ2x1c3RlclNpemVfKSB7XG4gICAgICAgIC8vIE1pbiBjbHVzdGVyIHNpemUgbm90IHlldCByZWFjaGVkLlxuICAgICAgICB0aGlzLmNsdXN0ZXJJY29uXy5oaWRlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbnVtU3R5bGVzID0gdGhpcy5tYXJrZXJDbHVzdGVyZXJfLmdldFN0eWxlcygpLmxlbmd0aDtcbiAgICB2YXIgc3VtcyA9IHRoaXMubWFya2VyQ2x1c3RlcmVyXy5nZXRDYWxjdWxhdG9yKCkodGhpcy5tYXJrZXJzXywgbnVtU3R5bGVzKTtcbiAgICB0aGlzLmNsdXN0ZXJJY29uXy5zZXRDZW50ZXIodGhpcy5jZW50ZXJfKTtcbiAgICB0aGlzLmNsdXN0ZXJJY29uXy5zZXRTdW1zKHN1bXMpO1xuICAgIHRoaXMuY2x1c3Rlckljb25fLnNob3coKTtcbn07XG5cblxuLyoqXG4gKiBBIGNsdXN0ZXIgaWNvblxuICpcbiAqIEBwYXJhbSB7Q2x1c3Rlcn0gY2x1c3RlciBUaGUgY2x1c3RlciB0byBiZSBhc3NvY2lhdGVkIHdpdGguXG4gKiBAcGFyYW0ge09iamVjdH0gc3R5bGVzIEFuIG9iamVjdCB0aGF0IGhhcyBzdHlsZSBwcm9wZXJ0aWVzOlxuICogICAgICd1cmwnOiAoc3RyaW5nKSBUaGUgaW1hZ2UgdXJsLlxuICogICAgICdoZWlnaHQnOiAobnVtYmVyKSBUaGUgaW1hZ2UgaGVpZ2h0LlxuICogICAgICd3aWR0aCc6IChudW1iZXIpIFRoZSBpbWFnZSB3aWR0aC5cbiAqICAgICAnYW5jaG9yJzogKEFycmF5KSBUaGUgYW5jaG9yIHBvc2l0aW9uIG9mIHRoZSBsYWJlbCB0ZXh0LlxuICogICAgICd0ZXh0Q29sb3InOiAoc3RyaW5nKSBUaGUgdGV4dCBjb2xvci5cbiAqICAgICAndGV4dFNpemUnOiAobnVtYmVyKSBUaGUgdGV4dCBzaXplLlxuICogICAgICdiYWNrZ3JvdW5kUG9zaXRpb246IChzdHJpbmcpIFRoZSBiYWNrZ3JvdW5kIHBvc3RpdGlvbiB4LCB5LlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcGFkZGluZyBPcHRpb25hbCBwYWRkaW5nIHRvIGFwcGx5IHRvIHRoZSBjbHVzdGVyIGljb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3XG4gKiBAaWdub3JlXG4gKi9cbmZ1bmN0aW9uIENsdXN0ZXJJY29uKGNsdXN0ZXIsIHN0eWxlcywgb3B0X3BhZGRpbmcpIHtcbiAgICBjbHVzdGVyLmdldE1hcmtlckNsdXN0ZXJlcigpLmV4dGVuZChDbHVzdGVySWNvbiwgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcpO1xuXG4gICAgdGhpcy5zdHlsZXNfID0gc3R5bGVzO1xuICAgIHRoaXMucGFkZGluZ18gPSBvcHRfcGFkZGluZyB8fCAwO1xuICAgIHRoaXMuY2x1c3Rlcl8gPSBjbHVzdGVyO1xuICAgIHRoaXMuY2VudGVyXyA9IG51bGw7XG4gICAgdGhpcy5tYXBfID0gY2x1c3Rlci5nZXRNYXAoKTtcbiAgICB0aGlzLmRpdl8gPSBudWxsO1xuICAgIHRoaXMuc3Vtc18gPSBudWxsO1xuICAgIHRoaXMudmlzaWJsZV8gPSBmYWxzZTtcblxuICAgIHRoaXMuc2V0TWFwKHRoaXMubWFwXyk7XG59XG5cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2x1c3RlcmNsaWNrIGV2ZW50IGFuZCB6b29tJ3MgaWYgdGhlIG9wdGlvbiBpcyBzZXQuXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS50cmlnZ2VyQ2x1c3RlckNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1hcmtlckNsdXN0ZXJlciA9IHRoaXMuY2x1c3Rlcl8uZ2V0TWFya2VyQ2x1c3RlcmVyKCk7XG5cbiAgICAvLyBUcmlnZ2VyIHRoZSBjbHVzdGVyY2xpY2sgZXZlbnQuXG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtYXJrZXJDbHVzdGVyZXIubWFwXywgJ2NsdXN0ZXJjbGljaycsIHRoaXMuY2x1c3Rlcl8pO1xuXG4gICAgaWYgKG1hcmtlckNsdXN0ZXJlci5pc1pvb21PbkNsaWNrKCkpIHtcbiAgICAgICAgLy8gWm9vbSBpbnRvIHRoZSBjbHVzdGVyLlxuICAgICAgICB0aGlzLm1hcF8uZml0Qm91bmRzKHRoaXMuY2x1c3Rlcl8uZ2V0Qm91bmRzKCkpO1xuICAgIH1cbn07XG5cblxuLyoqXG4gKiBBZGRpbmcgdGhlIGNsdXN0ZXIgaWNvbiB0byB0aGUgZG9tLlxuICogQGlnbm9yZVxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUub25BZGQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmRpdl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgICBpZiAodGhpcy52aXNpYmxlXykge1xuICAgICAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NGcm9tTGF0TG5nXyh0aGlzLmNlbnRlcl8pO1xuICAgICAgICB0aGlzLmRpdl8uc3R5bGUuY3NzVGV4dCA9IHRoaXMuY3JlYXRlQ3NzKHBvcyk7XG4gICAgICAgIHRoaXMuZGl2Xy5pbm5lckhUTUwgPSB0aGlzLnN1bXNfLnRleHQ7XG4gICAgfVxuXG4gICAgdmFyIHBhbmVzID0gdGhpcy5nZXRQYW5lcygpO1xuICAgIHBhbmVzLm92ZXJsYXlNb3VzZVRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmRpdl8pO1xuXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHRoaXMuZGl2XywgJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoYXQudHJpZ2dlckNsdXN0ZXJDbGljaygpO1xuICAgIH0pO1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvc2l0aW9uIHRvIHBsYWNlIHRoZSBkaXYgZGVuZGluZyBvbiB0aGUgbGF0bG5nLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBsYXRsbmcgVGhlIHBvc2l0aW9uIGluIGxhdGxuZy5cbiAqIEByZXR1cm4ge2dvb2dsZS5tYXBzLlBvaW50fSBUaGUgcG9zaXRpb24gaW4gcGl4ZWxzLlxuICogQHByaXZhdGVcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLmdldFBvc0Zyb21MYXRMbmdfID0gZnVuY3Rpb24obGF0bG5nKSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuZ2V0UHJvamVjdGlvbigpLmZyb21MYXRMbmdUb0RpdlBpeGVsKGxhdGxuZyk7XG4gICAgcG9zLnggLT0gcGFyc2VJbnQodGhpcy53aWR0aF8gLyAyLCAxMCk7XG4gICAgcG9zLnkgLT0gcGFyc2VJbnQodGhpcy5oZWlnaHRfIC8gMiwgMTApO1xuICAgIHJldHVybiBwb3M7XG59O1xuXG5cbi8qKlxuICogRHJhdyB0aGUgaWNvbi5cbiAqIEBpZ25vcmVcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy52aXNpYmxlXykge1xuICAgICAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NGcm9tTGF0TG5nXyh0aGlzLmNlbnRlcl8pO1xuICAgICAgICB0aGlzLmRpdl8uc3R5bGUudG9wID0gcG9zLnkgKyAncHgnO1xuICAgICAgICB0aGlzLmRpdl8uc3R5bGUubGVmdCA9IHBvcy54ICsgJ3B4JztcbiAgICB9XG59O1xuXG5cbi8qKlxuICogSGlkZSB0aGUgaWNvbi5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5kaXZfKSB7XG4gICAgICAgIHRoaXMuZGl2Xy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgICB0aGlzLnZpc2libGVfID0gZmFsc2U7XG59O1xuXG5cbi8qKlxuICogUG9zaXRpb24gYW5kIHNob3cgdGhlIGljb24uXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuZGl2Xykge1xuICAgICAgICB2YXIgcG9zID0gdGhpcy5nZXRQb3NGcm9tTGF0TG5nXyh0aGlzLmNlbnRlcl8pO1xuICAgICAgICB0aGlzLmRpdl8uc3R5bGUuY3NzVGV4dCA9IHRoaXMuY3JlYXRlQ3NzKHBvcyk7XG4gICAgICAgIHRoaXMuZGl2Xy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgfVxuICAgIHRoaXMudmlzaWJsZV8gPSB0cnVlO1xufTtcblxuXG4vKipcbiAqIFJlbW92ZSB0aGUgaWNvbiBmcm9tIHRoZSBtYXBcbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0TWFwKG51bGwpO1xufTtcblxuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBvblJlbW92ZSBpbnRlcmZhY2UuXG4gKiBAaWdub3JlXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmRpdl8gJiYgdGhpcy5kaXZfLnBhcmVudE5vZGUpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMuZGl2Xy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZGl2Xyk7XG4gICAgICAgIHRoaXMuZGl2XyA9IG51bGw7XG4gICAgfVxufTtcblxuXG4vKipcbiAqIFNldCB0aGUgc3VtcyBvZiB0aGUgaWNvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc3VtcyBUaGUgc3VtcyBjb250YWluaW5nOlxuICogICAndGV4dCc6IChzdHJpbmcpIFRoZSB0ZXh0IHRvIGRpc3BsYXkgaW4gdGhlIGljb24uXG4gKiAgICdpbmRleCc6IChudW1iZXIpIFRoZSBzdHlsZSBpbmRleCBvZiB0aGUgaWNvbi5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnNldFN1bXMgPSBmdW5jdGlvbihzdW1zKSB7XG4gICAgdGhpcy5zdW1zXyA9IHN1bXM7XG4gICAgdGhpcy50ZXh0XyA9IHN1bXMudGV4dDtcbiAgICB0aGlzLmluZGV4XyA9IHN1bXMuaW5kZXg7XG4gICAgaWYgKHRoaXMuZGl2Xykge1xuICAgICAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gc3Vtcy50ZXh0O1xuICAgIH1cblxuICAgIHRoaXMudXNlU3R5bGUoKTtcbn07XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBpY29uIHRvIHRoZSB0aGUgc3R5bGVzLlxuICovXG5DbHVzdGVySWNvbi5wcm90b3R5cGUudXNlU3R5bGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLnN1bXNfLmluZGV4IC0gMSk7XG4gICAgaW5kZXggPSBNYXRoLm1pbih0aGlzLnN0eWxlc18ubGVuZ3RoIC0gMSwgaW5kZXgpO1xuICAgIHZhciBzdHlsZSA9IHRoaXMuc3R5bGVzX1tpbmRleF07XG4gICAgdGhpcy51cmxfID0gc3R5bGVbJ3VybCddO1xuICAgIHRoaXMuaGVpZ2h0XyA9IHN0eWxlWydoZWlnaHQnXTtcbiAgICB0aGlzLndpZHRoXyA9IHN0eWxlWyd3aWR0aCddO1xuICAgIHRoaXMudGV4dENvbG9yXyA9IHN0eWxlWyd0ZXh0Q29sb3InXTtcbiAgICB0aGlzLmFuY2hvcl8gPSBzdHlsZVsnYW5jaG9yJ107XG4gICAgdGhpcy50ZXh0U2l6ZV8gPSBzdHlsZVsndGV4dFNpemUnXTtcbiAgICB0aGlzLmJhY2tncm91bmRQb3NpdGlvbl8gPSBzdHlsZVsnYmFja2dyb3VuZFBvc2l0aW9uJ107XG59O1xuXG5cbi8qKlxuICogU2V0cyB0aGUgY2VudGVyIG9mIHRoZSBpY29uLlxuICpcbiAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTGF0TG5nfSBjZW50ZXIgVGhlIGxhdGxuZyB0byBzZXQgYXMgdGhlIGNlbnRlci5cbiAqL1xuQ2x1c3Rlckljb24ucHJvdG90eXBlLnNldENlbnRlciA9IGZ1bmN0aW9uKGNlbnRlcikge1xuICAgIHRoaXMuY2VudGVyXyA9IGNlbnRlcjtcbn07XG5cblxuLyoqXG4gKiBDcmVhdGUgdGhlIGNzcyB0ZXh0IGJhc2VkIG9uIHRoZSBwb3NpdGlvbiBvZiB0aGUgaWNvbi5cbiAqXG4gKiBAcGFyYW0ge2dvb2dsZS5tYXBzLlBvaW50fSBwb3MgVGhlIHBvc2l0aW9uLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY3NzIHN0eWxlIHRleHQuXG4gKi9cbkNsdXN0ZXJJY29uLnByb3RvdHlwZS5jcmVhdGVDc3MgPSBmdW5jdGlvbihwb3MpIHtcbiAgICB2YXIgc3R5bGUgPSBbXTtcbiAgICBzdHlsZS5wdXNoKCdiYWNrZ3JvdW5kLWltYWdlOnVybCgnICsgdGhpcy51cmxfICsgJyk7Jyk7XG4gICAgdmFyIGJhY2tncm91bmRQb3NpdGlvbiA9IHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uXyA/IHRoaXMuYmFja2dyb3VuZFBvc2l0aW9uXyA6ICcwIDAnO1xuICAgIHN0eWxlLnB1c2goJ2JhY2tncm91bmQtcG9zaXRpb246JyArIGJhY2tncm91bmRQb3NpdGlvbiArICc7Jyk7XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuYW5jaG9yXyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmFuY2hvcl9bMF0gPT09ICdudW1iZXInICYmIHRoaXMuYW5jaG9yX1swXSA+IDAgJiZcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yX1swXSA8IHRoaXMuaGVpZ2h0Xykge1xuICAgICAgICAgICAgc3R5bGUucHVzaCgnaGVpZ2h0OicgKyAodGhpcy5oZWlnaHRfIC0gdGhpcy5hbmNob3JfWzBdKSArXG4gICAgICAgICAgICAgICAgJ3B4OyBwYWRkaW5nLXRvcDonICsgdGhpcy5hbmNob3JfWzBdICsgJ3B4OycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3R5bGUucHVzaCgnaGVpZ2h0OicgKyB0aGlzLmhlaWdodF8gKyAncHg7IGxpbmUtaGVpZ2h0OicgKyB0aGlzLmhlaWdodF8gK1xuICAgICAgICAgICAgICAgICdweDsnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuYW5jaG9yX1sxXSA9PT0gJ251bWJlcicgJiYgdGhpcy5hbmNob3JfWzFdID4gMCAmJlxuICAgICAgICAgICAgdGhpcy5hbmNob3JfWzFdIDwgdGhpcy53aWR0aF8pIHtcbiAgICAgICAgICAgIHN0eWxlLnB1c2goJ3dpZHRoOicgKyAodGhpcy53aWR0aF8gLSB0aGlzLmFuY2hvcl9bMV0pICtcbiAgICAgICAgICAgICAgICAncHg7IHBhZGRpbmctbGVmdDonICsgdGhpcy5hbmNob3JfWzFdICsgJ3B4OycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3R5bGUucHVzaCgnd2lkdGg6JyArIHRoaXMud2lkdGhfICsgJ3B4OyB0ZXh0LWFsaWduOmNlbnRlcjsnKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlLnB1c2goJ2hlaWdodDonICsgdGhpcy5oZWlnaHRfICsgJ3B4OyBsaW5lLWhlaWdodDonICtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0XyArICdweDsgd2lkdGg6JyArIHRoaXMud2lkdGhfICsgJ3B4OyB0ZXh0LWFsaWduOmNlbnRlcjsnKTtcbiAgICB9XG5cbiAgICB2YXIgdHh0Q29sb3IgPSB0aGlzLnRleHRDb2xvcl8gPyB0aGlzLnRleHRDb2xvcl8gOiAnYmxhY2snO1xuICAgIHZhciB0eHRTaXplID0gdGhpcy50ZXh0U2l6ZV8gPyB0aGlzLnRleHRTaXplXyA6IDExO1xuXG4gICAgc3R5bGUucHVzaCgnY3Vyc29yOnBvaW50ZXI7IHRvcDonICsgcG9zLnkgKyAncHg7IGxlZnQ6JyArXG4gICAgICAgIHBvcy54ICsgJ3B4OyBjb2xvcjonICsgdHh0Q29sb3IgKyAnOyBwb3NpdGlvbjphYnNvbHV0ZTsgZm9udC1zaXplOicgK1xuICAgICAgICB0eHRTaXplICsgJ3B4OyBmb250LWZhbWlseTpBcmlhbCxzYW5zLXNlcmlmOyBmb250LXdlaWdodDpib2xkJyk7XG4gICAgcmV0dXJuIHN0eWxlLmpvaW4oJycpO1xufTtcblxuXG4vLyBFeHBvcnQgU3ltYm9scyBmb3IgQ2xvc3VyZVxuLy8gSWYgeW91IGFyZSBub3QgZ29pbmcgdG8gY29tcGlsZSB3aXRoIGNsb3N1cmUgdGhlbiB5b3UgY2FuIHJlbW92ZSB0aGVcbi8vIGNvZGUgYmVsb3cuXG53aW5kb3dbJ01hcmtlckNsdXN0ZXJlciddID0gTWFya2VyQ2x1c3RlcmVyO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnYWRkTWFya2VyJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmFkZE1hcmtlcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2FkZE1hcmtlcnMnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuYWRkTWFya2Vycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2NsZWFyTWFya2VycyddID1cbiAgICBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmNsZWFyTWFya2Vycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2ZpdE1hcFRvTWFya2VycyddID1cbiAgICBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmZpdE1hcFRvTWFya2Vycztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldENhbGN1bGF0b3InXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRDYWxjdWxhdG9yO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0R3JpZFNpemUnXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRHcmlkU2l6ZTtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldEV4dGVuZGVkQm91bmRzJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0RXh0ZW5kZWRCb3VuZHM7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydnZXRNYXAnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0TWFwO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0TWFya2VycyddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNYXJrZXJzO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0TWF4Wm9vbSddID0gTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRNYXhab29tO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0U3R5bGVzJ10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmdldFN0eWxlcztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ2dldFRvdGFsQ2x1c3RlcnMnXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5nZXRUb3RhbENsdXN0ZXJzO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnZ2V0VG90YWxNYXJrZXJzJ10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUuZ2V0VG90YWxNYXJrZXJzO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsncmVkcmF3J10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlZHJhdztcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3JlbW92ZU1hcmtlciddID1cbiAgICBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlbW92ZU1hcmtlcjtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3JlbW92ZU1hcmtlcnMnXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5yZW1vdmVNYXJrZXJzO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsncmVzZXRWaWV3cG9ydCddID1cbiAgICBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLnJlc2V0Vmlld3BvcnQ7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydyZXBhaW50J10gPVxuICAgIE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUucmVwYWludDtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3NldENhbGN1bGF0b3InXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRDYWxjdWxhdG9yO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnc2V0R3JpZFNpemUnXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRHcmlkU2l6ZTtcbk1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGVbJ3NldE1heFpvb20nXSA9XG4gICAgTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZS5zZXRNYXhab29tO1xuTWFya2VyQ2x1c3RlcmVyLnByb3RvdHlwZVsnb25BZGQnXSA9IE1hcmtlckNsdXN0ZXJlci5wcm90b3R5cGUub25BZGQ7XG5NYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlWydkcmF3J10gPSBNYXJrZXJDbHVzdGVyZXIucHJvdG90eXBlLmRyYXc7XG5cbkNsdXN0ZXIucHJvdG90eXBlWydnZXRDZW50ZXInXSA9IENsdXN0ZXIucHJvdG90eXBlLmdldENlbnRlcjtcbkNsdXN0ZXIucHJvdG90eXBlWydnZXRTaXplJ10gPSBDbHVzdGVyLnByb3RvdHlwZS5nZXRTaXplO1xuQ2x1c3Rlci5wcm90b3R5cGVbJ2dldE1hcmtlcnMnXSA9IENsdXN0ZXIucHJvdG90eXBlLmdldE1hcmtlcnM7XG5cbkNsdXN0ZXJJY29uLnByb3RvdHlwZVsnb25BZGQnXSA9IENsdXN0ZXJJY29uLnByb3RvdHlwZS5vbkFkZDtcbkNsdXN0ZXJJY29uLnByb3RvdHlwZVsnZHJhdyddID0gQ2x1c3Rlckljb24ucHJvdG90eXBlLmRyYXc7XG5DbHVzdGVySWNvbi5wcm90b3R5cGVbJ29uUmVtb3ZlJ10gPSBDbHVzdGVySWNvbi5wcm90b3R5cGUub25SZW1vdmU7XG5cbk9iamVjdC5rZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24obykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIGZvcih2YXIgbmFtZSBpbiBvKSB7XG4gICAgICAgICAgICBpZiAoby5oYXNPd25Qcm9wZXJ0eShuYW1lKSlcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07IiwialF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xuXG4gICAgLy93aGVuIHRoZSBsb2NhdGlvbi1hZGQgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKCcjbG9jYXRpb25fc2V0dGluZ19hZGQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy9nZXQgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgbG9jYXRpb25cbiAgICAgICAgdmFyIGxvY2F0aW9uX2lkID0gJCgnI2xvY2F0aW9uX3NldHRpbmdfc2VsZWN0JykudmFsKCk7XG5cbiAgICAgICAgLy8gaWYgaXQgd2FzIHRoZSBwbGFjZWhvbGRlciwgcXVpdC4uLlxuICAgICAgICBpZiAobG9jYXRpb25faWQgPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBjdXJyZW50IGxvY2F0aW9uIHRpdGxlXG4gICAgICAgIHZhciBsb2NhdGlvbl90aXRsZSA9ICQoJyNsb2NhdGlvbl9zZXR0aW5nX3NlbGVjdCBvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgICAgIHZhciBkZWZhdWx0cyA9ICQoJyNsb2NhdGlvbl9zZXR0aW5nX3NlbGVjdCBvcHRpb246c2VsZWN0ZWQnKS5kYXRhKCdkZWZhdWx0cycpO1xuXG4gICAgICAgIC8vcmVtb3ZlIGl0ZW0gZnJvbSB0aGUgb3B0aW9ucyAoIHdlIGRvbid0IG5lZWQgaXQgdGhlcmUgYW55bW9yZSApXG4gICAgICAgICQoJyNsb2NhdGlvbl9zZXR0aW5nX3NlbGVjdCBvcHRpb246c2VsZWN0ZWQnKS5yZW1vdmUoKTtcblxuICAgICAgICB2YXIgY2hlY2tlZCA9ICcnO1xuICAgICAgICBpZiAoeW9hc3Rfd2NzZW9fbG9jYWxfdHJhbnNsYXRpb25zLmhhc19jYXRlZ29yaWVzID09IDApIHtcbiAgICAgICAgICAgIGNoZWNrZWQgKz0gJyBjaGVja2VkPVwiY2hlY2tlZFwiJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vYXBwZW5kIGEgbmV3IHJvdyB0b3QgaHRlIHRhYmxlIHdpdGggdGhlc2UgbG9jYXRpb24gc3BlY3NcbiAgICAgICAgJCgndGJvZHkjc2hpcHBpbmdfbG9jYXRpb25zJykuYXBwZW5kKFxuICAgICAgICAgICAgJzx0ciBjbGFzcz1cImxvY2F0aW9uXCIgZGF0YS1pZD1cIicgKyBsb2NhdGlvbl9pZCArICdcIiBkYXRhLXRpdGxlPVwiJyArIGVuY29kZVVSSShsb2NhdGlvbl90aXRsZSkgKyAnXCIgZGF0YS1kZWZhdWx0cz1cXCcnICsgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdHMpICsgJ1xcJyAgPicgK1xuICAgICAgICAgICAgJzx0aCBzY29wZT1cInJvd1wiIGNsYXNzPVwiY2hlY2stY29sdW1uXCI+PC90aD4nICtcbiAgICAgICAgICAgICc8dGQ+JyArIGxvY2F0aW9uX3RpdGxlICsgJzwvdGQ+JyArXG4gICAgICAgICAgICAnPHRkPjxsYWJlbCBmb3I9XCJ5b2FzdF93Y3Nlb19sb2NhbF9waWNrdXBfbG9jYXRpb25fYWxsb3dlZFsnICsgbG9jYXRpb25faWQgKyAnXVwiIGNsYXNzPVwic2NyZWVuLXJlYWRlci10ZXh0XCI+JyArIHlvYXN0X3djc2VvX2xvY2FsX3RyYW5zbGF0aW9ucy5sYWJlbF9hbGxvd19sb2NhdGlvbi5yZXBsYWNlKCclcycsIGxvY2F0aW9uX3RpdGxlKSArICc8L2xhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIicgKyBjaGVja2VkICsgJyBuYW1lPVwieW9hc3Rfd2NzZW9fbG9jYWxfcGlja3VwX2xvY2F0aW9uX2FsbG93ZWRbJyArIGxvY2F0aW9uX2lkICsgJ11cIiAvPiA8c21hbGw+JyArIGRlZmF1bHRzLnN0YXR1cyArICc8L3NtYWxsPjwvdGQ+JyArXG4gICAgICAgICAgICAnPHRkPjxsYWJlbCBmb3I9XCJ5b2FzdF93Y3Nlb19sb2NhbF9waWNrdXBfbG9jYXRpb25fY29zdFsnICsgbG9jYXRpb25faWQgKyAnXVwiIGNsYXNzPVwic2NyZWVuLXJlYWRlci10ZXh0XCI+JyArIHlvYXN0X3djc2VvX2xvY2FsX3RyYW5zbGF0aW9ucy5sYWJlbF9jb3N0c19sb2NhdGlvbi5yZXBsYWNlKCclcycsIGxvY2F0aW9uX3RpdGxlKSArICc8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ5b2FzdF93Y3Nlb19sb2NhbF9waWNrdXBfbG9jYXRpb25fY29zdFsnICsgbG9jYXRpb25faWQgKyAnXVwiIHBsYWNlaG9sZGVyPVwiJyArIHlvYXN0X3djc2VvX2xvY2FsX3RyYW5zbGF0aW9ucy5wbGFjZWhvbGRlcl9jb3N0c19sb2NhdGlvbiArICdcIiBjbGFzcz1cImlucHV0LXRleHQgcmVndWxhci1pbnB1dFwiID4gPHNtYWxsPicgKyBkZWZhdWx0cy5wcmljZSArICc8L3NtYWxsPjwvdGQ+JyArXG4gICAgICAgICAgICAnPHRkPjxpbnB1dCBjbGFzcz1cImxvY2F0aW9uX3J1bGVfcmVtb3ZlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uXCIgdmFsdWU9XCInICsgeW9hc3Rfd2NzZW9fbG9jYWxfdHJhbnNsYXRpb25zLmxhYmVsX3JlbW92ZSArICdcIj48L3RkPicgK1xuICAgICAgICAgICAgJzwvdHI+J1xuICAgICAgICApO1xuXG4gICAgICAgIC8vdW4tYmluZCBhbmQgcmUtYmluZCBjbGljayBldmVudHMsIGJlY2F1c2Ugb3VyIERPTSBoYXMgY2hhbmdlZFxuICAgICAgICAkKCcubG9jYXRpb25fcnVsZV9yZW1vdmUnKS51bmJpbmQoJ2NsaWNrJyk7XG4gICAgICAgICQoJy5sb2NhdGlvbl9ydWxlX3JlbW92ZScpLm9uKCdjbGljaycsIHlvYXN0X3JlbW92ZV9sb2NhdGlvbik7XG5cbiAgICB9KTtcblxuICAgIC8vIGJpbmQgY2xpY2sgZXZlbnQgZm9yIHRoZSByZW1vdmUgYnV0dG9uXG4gICAgJCgnLmxvY2F0aW9uX3J1bGVfcmVtb3ZlJykub24oJ2NsaWNrJywgeW9hc3RfcmVtb3ZlX2xvY2F0aW9uKTtcblxuICAgIC8vIFNob3cgYWxlcnQgd2hlbiB5b3UncmUgYWN0aXZhdGluZyB0aGUgTG9jYWwgU3RvcmUgUGlja3VwLlxuICAgICQoJyN3b29jb21tZXJjZV95b2FzdF93Y3Nlb19sb2NhbF9waWNrdXBfZW5hYmxlZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgaWYgKCR0aGlzLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgICAgICB2YXIgYW5zd2VyID0gY29uZmlybSh5b2FzdF93Y3Nlb19sb2NhbF90cmFuc2xhdGlvbnMud2FybmluZ19lbmFibGVfcGlja3VwKTtcbiAgICAgICAgICAgIGlmIChmYWxzZSA9PSBhbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxufSk7XG5cblxuZnVuY3Rpb24geW9hc3RfcmVtb3ZlX2xvY2F0aW9uKCkge1xuXG4gICAgLy8gZmluZCB0aGUgcm93LWVsZW1lbnQgZm9yIHRoaXMgaXRlbVxuICAgIHZhciAkcm93ID0galF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJ3RyJyk7XG5cbiAgICAvL2dldCB0aGUgc3BlY3MgZm9ybSB0aGlzIHJvd1xuICAgIHZhciBpZCA9ICRyb3cuZGF0YSgnaWQnKTtcbiAgICB2YXIgdGl0bGUgPSAkcm93LmRhdGEoJ3RpdGxlJyk7XG4gICAgdmFyIGRlZmF1bHRzID0gJHJvdy5kYXRhKCdkZWZhdWx0cycpO1xuXG4gICAgLy9yZW1vdmUgdGhlIHJvd1xuICAgICRyb3cucmVtb3ZlKCk7XG5cbiAgICAvL2J1dCB0aGUgc3BlY3MgYmFjayBpbnRvIG91ciBvcHRpb25zL3NlbGVjdFxuICAgIGpRdWVyeSgnI2xvY2F0aW9uX3NldHRpbmdfc2VsZWN0JykuYXBwZW5kKCc8b3B0aW9uIHZhbHVlPVwiJyArIGlkICsgJ1wiIGRhdGEtZGVmYXVsdHM9XFwnJyArIEpTT04uc3RyaW5naWZ5KGRlZmF1bHRzKSArICdcXCc+JyArIGRlY29kZVVSSSh0aXRsZSkgKyAnPC9vcHRpb24+Jyk7XG59XG4iXX0=
