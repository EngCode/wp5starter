(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var wpseo_directions=[],wpseo_maps=[],markers=new Object;wpseo_directions=[],wpseo_maps=[],markers=new Object;window.wpseo_show_map=function(e,o,t,n,a,r,s,l,i,d,g){var c=new google.maps.LatLngBounds,m=new google.maps.LatLng(t,n);markers[o]=[];var p={zoom:a,minZoom:1,mapTypeControl:!0,zoomControl:s,streetViewControl:!0,mapTypeId:google.maps.MapTypeId[r.toUpperCase()],scrollwheel:s&&window.innerWidth>480};if(checkForTouch()?p.gestureHandling=l?"auto":"none":p.draggable=l,-1==a){for(var u=0;u<e.length;u++){var w=new google.maps.LatLng(e[u].lat,e[u].long);c.extend(w)}m=c.getCenter()}p.center=m;try{var _=new google.maps.Map(document.getElementById("map_canvas"+(0!=o?"_"+o:"")),p)}catch(e){return}-1===a&&_.fitBounds(c);var v=new google.maps.InfoWindow({content:h});for(u=0;u<e.length;u++){var h=getInfoBubbleText(e[u].name,e[u].address,e[u].url,e[u].self_url),y=(w=new google.maps.LatLng(e[u].lat,e[u].long),e[u].custom_marker),f=e[u].categories;markers[o][u]=new google.maps.Marker({position:w,center:m,map:_,map_id:o,html:h,draggable:Boolean(d),icon:void 0!==y&&y||"",categories:void 0!==f&&f||""})}for(u=0;u<markers[o].length;u++){var k=markers[o][u];google.maps.event.addListener(k,"click",function(){v.setContent(this.html),v.open(_,this)}),google.maps.event.addListener(v,"closeclick",function(){_.setCenter(this.getPosition())}),google.maps.event.addListener(k,"dragend",function(e){document.getElementById("wpseo_coordinates_lat")&&document.getElementById("wpseo_coordinates_long")&&(document.getElementById("wpseo_coordinates_lat").value=e.latLng.lat(),document.getElementById("wpseo_coordinates_long").value=e.latLng.lng()),document.getElementById("location_coords_lat")&&document.getElementById("location_coords_long")&&(document.getElementById("location_coords_lat").value=e.latLng.lat(),document.getElementById("location_coords_long").value=e.latLng.lng())})}return g&&new MarkerClusterer(_,markers[o],{imagePath:wpseo_local_data.marker_cluster_image_path}),1==markers[o].length&&i&&(v.setContent(markers[o][0].html),v.open(_,k)),_},window.checkForTouch=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},window.wpseo_get_directions=function(e,o,t,n){var a="";return n&&o.length>=1&&((a=new google.maps.DirectionsRenderer).setMap(e),a.setPanel(document.getElementById("directions"+(0!=t?"_"+t:"")))),a},window.getInfoBubbleText=function(e,o,t,n){var a='<div class="wpseo-info-window-wrapper">',r=!1;return null!=n&&""!=wpseo_local_data.has_multiple_locations&&n!=window.location.href&&(r=!0),r&&(a+='<a href="'+n+'">'),a+="<strong>"+e+"</strong>",r&&(a+="</a>"),a+="<br>",a+=o,a+="</div>"},window.wpseo_calculate_route=function(e,o,t,n,a){null!=document.getElementById("wpseo-sl-coords-lat")&&(t=document.getElementById("wpseo-sl-coords-lat").value),null!=document.getElementById("wpseo-sl-coords-long")&&(n=document.getElementById("wpseo-sl-coords-long").value);var r=document.getElementById("origin"+(0!=a?"_"+a:"")).value+" "+wpseo_local_data.default_country,s=google.maps.UnitSystem.METRIC;"IMPERIAL"==wpseo_local_data.unit_system&&(s=google.maps.UnitSystem.IMPERIAL);for(var l=0;l<markers.length;l++)markers[l].setMap(null);if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var i="https://maps.google.com/maps?saddr="+escape(r)+"&daddr="+t+","+n;return window.open(i,"_blank"),!1}var d={origin:r,destination:new google.maps.LatLng(t,n),provideRouteAlternatives:!0,optimizeWaypoints:!0,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:s};(new google.maps.DirectionsService).route(d,function(e,t){if(t==google.maps.DirectionsStatus.OK)o.setDirections(e);else if(t==google.maps.DirectionsStatus.ZERO_RESULTS){document.getElementById("wpseo-noroute").setAttribute("style","clear: both; display: block;")}})},window.wpseo_sl_show_route=function(e,o,t){$=jQuery,$(".wpseo-sl-coords").remove();var n='<input type="hidden" class="wpseo-sl-coords" id="wpseo-sl-coords-lat" value="'+o+'">';n+='<input type="hidden" class="wpseo-sl-coords" id="wpseo-sl-coords-long" value="'+t+'">',$("#wpseo-directions-form").append(n).submit(),$("#wpseo-directions-wrapper").slideUp(function(){$(this).insertAfter($(e).parents(".wpseo-result")).slideDown()})},window.filterMarkers=function(e,o){for(i=0;i<markers[o].length;i++)marker=markers[o][i],marker.categories.hasOwnProperty(e)||0===e.length?marker.setVisible(!0):marker.setVisible(!1)};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvd3Atc2VvLWxvY2FsLWZyb250ZW5kLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO2FDQUEsSUFBSSxpQkFBbUIsR0FDbkIsV0FBYSxHQUNiLFFBQVUsSUFBSSxPQUVkLGlCQUFtQixHQUNuQixXQUFhLEdBQ2IsUUFBVSxJQUFJLE9BRWxCLE9BQU8sZUFBaUIsU0FBd0IsRUFBZSxFQUFTLEVBQVksRUFBYSxFQUFNLEVBQVcsRUFBWSxFQUFXLEVBQXlCLEVBQVUsR0FDeEssSUFBSSxFQUFTLElBQUksT0FBTyxLQUFLLGFBQ3pCLEVBQVMsSUFBSSxPQUFPLEtBQUssT0FBTyxFQUFZLEdBRWhELFFBQVEsR0FBVyxHQUVuQixJQUFJLEVBQW9CLENBQ3BCLEtBQU0sRUFDTixRQUFTLEVBQ1QsZ0JBQWdCLEVBQ2hCLFlBQWEsRUFDYixtQkFBbUIsRUFDbkIsVUFBVyxPQUFPLEtBQUssVUFBVSxFQUFVLGVBQzNDLFlBQWEsR0FBYyxPQUFPLFdBVmYsS0FxQnZCLEdBUEksZ0JBQ0EsRUFBa0IsZ0JBQWtCLEVBQVksT0FBUyxPQUV6RCxFQUFrQixVQUFZLEdBSXJCLEdBQVQsRUFBWSxDQUNaLElBQUssSUFBSSxFQUFJLEVBQUcsRUFBSSxFQUFjLE9BQVEsSUFBSyxDQUMzQyxJQUFJLEVBQVUsSUFBSSxPQUFPLEtBQUssT0FBTyxFQUFjLEdBQWQsSUFBeUIsRUFBYyxHQUFkLE1BQzlELEVBQU8sT0FBTyxHQUdsQixFQUFTLEVBQU8sWUFFcEIsRUFBa0IsT0FBUyxFQUUzQixJQUNDLElBQUksRUFBTSxJQUFJLE9BQU8sS0FBSyxJQUFLLFNBQVMsZUFBZ0IsY0FBNEIsR0FBWCxFQUFlLElBQU0sRUFBVSxLQUFRLEdBRWpILE1BQU8sR0FDSCxRQUdVLElBQVYsR0FDQSxFQUFJLFVBQVUsR0FJbEIsSUFBSSxFQUFhLElBQUksT0FBTyxLQUFLLFdBQVcsQ0FDeEMsUUFBUyxJQUdi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LCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJ2YXIgd3BzZW9fZGlyZWN0aW9ucyA9IFtdO1xudmFyIHdwc2VvX21hcHMgPSBbXTtcbnZhciBtYXJrZXJzID0gbmV3IE9iamVjdCgpO1xuXG52YXIgd3BzZW9fZGlyZWN0aW9ucyA9IFtdO1xudmFyIHdwc2VvX21hcHMgPSBbXTtcbnZhciBtYXJrZXJzID0gbmV3IE9iamVjdCgpO1xuXG53aW5kb3cud3BzZW9fc2hvd19tYXAgPSBmdW5jdGlvbiB3cHNlb19zaG93X21hcChsb2NhdGlvbl9kYXRhLCBjb3VudGVyLCBjZW50ZXJfbGF0LCBjZW50ZXJfbG9uZywgem9vbSwgbWFwX3N0eWxlLCBzY3JvbGxhYmxlLCBkcmFnZ2FibGUsIGRlZmF1bHRfc2hvd19pbmZvd2luZG93LCBpc19hZG1pbiwgbWFya2VyX2NsdXN0ZXJpbmcpIHtcbiAgICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuICAgIHZhciBjZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGNlbnRlcl9sYXQsIGNlbnRlcl9sb25nKTtcbiAgICB2YXIgbW9iaWxlQnJlYWtwb2ludCA9IDQ4MDtcbiAgICBtYXJrZXJzW2NvdW50ZXJdID0gW107XG5cbiAgICB2YXIgd3BzZW9fbWFwX29wdGlvbnMgPSB7XG4gICAgICAgIHpvb206IHpvb20sXG4gICAgICAgIG1pblpvb206IDEsXG4gICAgICAgIG1hcFR5cGVDb250cm9sOiB0cnVlLFxuICAgICAgICB6b29tQ29udHJvbDogc2Nyb2xsYWJsZSxcbiAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IHRydWUsXG4gICAgICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkW21hcF9zdHlsZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IHNjcm9sbGFibGUgJiYgd2luZG93LmlubmVyV2lkdGggPiBtb2JpbGVCcmVha3BvaW50XG4gICAgfTtcblxuICAgIC8vIGdlc3R1cmVIYW5kbGluZyBzaG91bGQgb25seSBiZSBzZXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgdG91Y2guXG4gICAgaWYgKGNoZWNrRm9yVG91Y2goKSkge1xuICAgICAgICB3cHNlb19tYXBfb3B0aW9ucy5nZXN0dXJlSGFuZGxpbmcgPSBkcmFnZ2FibGUgPyAnYXV0bycgOiAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd3BzZW9fbWFwX29wdGlvbnMuZHJhZ2dhYmxlID0gZHJhZ2dhYmxlO1xuICAgIH1cblxuICAgIC8vIFNldCBjZW50ZXJcbiAgICBpZiAoem9vbSA9PSAtMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvY2F0aW9uX2RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsYXRMb25nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbl9kYXRhW2ldW1wibGF0XCJdLCBsb2NhdGlvbl9kYXRhW2ldW1wibG9uZ1wiXSk7XG4gICAgICAgICAgICBib3VuZHMuZXh0ZW5kKGxhdExvbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2VudGVyID0gYm91bmRzLmdldENlbnRlcigpO1xuICAgIH1cbiAgICB3cHNlb19tYXBfb3B0aW9ucy5jZW50ZXIgPSBjZW50ZXI7XG5cbiAgICB0cnkge1xuXHQgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBcIm1hcF9jYW52YXNcIiArICggY291bnRlciAhPSAwID8gJ18nICsgY291bnRlciA6ICcnICkgKSwgd3BzZW9fbWFwX29wdGlvbnMgKTtcbiAgICB9XG4gICAgY2F0Y2goIGVycm9yICkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHpvb20gPT09IC0xKSB7XG4gICAgICAgIG1hcC5maXRCb3VuZHMoYm91bmRzKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgbWFya2VycyArIGluZm9cbiAgICB2YXIgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHtcbiAgICAgICAgY29udGVudDogaW5mb1dpbmRvd0hUTUxcbiAgICB9KTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYXRpb25fZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDcmVhdGUgaW5mbyB3aW5kb3cgSFRNTFxuICAgICAgICB2YXIgaW5mb1dpbmRvd0hUTUwgPSBnZXRJbmZvQnViYmxlVGV4dChsb2NhdGlvbl9kYXRhW2ldW1wibmFtZVwiXSwgbG9jYXRpb25fZGF0YVtpXVtcImFkZHJlc3NcIl0sIGxvY2F0aW9uX2RhdGFbaV1bXCJ1cmxcIl0sIGxvY2F0aW9uX2RhdGFbaV1bXCJzZWxmX3VybFwiXSk7XG5cbiAgICAgICAgdmFyIGxhdExvbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uX2RhdGFbaV1bXCJsYXRcIl0sIGxvY2F0aW9uX2RhdGFbaV1bXCJsb25nXCJdKTtcbiAgICAgICAgdmFyIGljb24gPSBsb2NhdGlvbl9kYXRhW2ldW1wiY3VzdG9tX21hcmtlclwiXTtcbiAgICAgICAgdmFyIGNhdGVnb3JpZXMgPSBsb2NhdGlvbl9kYXRhW2ldW1wiY2F0ZWdvcmllc1wiXTtcblxuICAgICAgICBtYXJrZXJzW2NvdW50ZXJdW2ldID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgICBwb3NpdGlvbjogbGF0TG9uZyxcbiAgICAgICAgICAgIGNlbnRlcjogY2VudGVyLFxuICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICBtYXBfaWQ6IGNvdW50ZXIsXG4gICAgICAgICAgICBodG1sOiBpbmZvV2luZG93SFRNTCxcbiAgICAgICAgICAgIGRyYWdnYWJsZTogQm9vbGVhbihpc19hZG1pbiksXG4gICAgICAgICAgICBpY29uOiB0eXBlb2YgaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgaWNvbiB8fCAnJyxcbiAgICAgICAgICAgIGNhdGVnb3JpZXM6IHR5cGVvZiBjYXRlZ29yaWVzICE9PSAndW5kZWZpbmVkJyAmJiBjYXRlZ29yaWVzIHx8ICcnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtlcnNbY291bnRlcl0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG1hcmtlciA9IG1hcmtlcnNbY291bnRlcl1baV07XG5cbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCBcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudCh0aGlzLmh0bWwpO1xuICAgICAgICAgICAgaW5mb1dpbmRvdy5vcGVuKG1hcCwgdGhpcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKGluZm9XaW5kb3csICdjbG9zZWNsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbWFwLnNldENlbnRlcih0aGlzLmdldFBvc2l0aW9uKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdkcmFnZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyBJZiBvbiBhIHNpbmdsZSBsb2NhdGlvbiBwYWdlIGluIGEgbXVsdGlwbGUgbG9jYXRpb24gc2V0dXAuXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dwc2VvX2Nvb3JkaW5hdGVzX2xhdCcpICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cHNlb19jb29yZGluYXRlc19sb25nJykpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3BzZW9fY29vcmRpbmF0ZXNfbGF0JykudmFsdWUgPSBldmVudC5sYXRMbmcubGF0KCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dwc2VvX2Nvb3JkaW5hdGVzX2xvbmcnKS52YWx1ZSA9IGV2ZW50LmxhdExuZy5sbmcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgb24gdGhlIFlvYXN0IExvY2FsIFNFTyBzZXR0aW5ncyBwYWdlLCB1c2luZyBhIHNpbmdsZSBsb2NhdGlvbi5cbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYXRpb25fY29vcmRzX2xhdCcpICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbl9jb29yZHNfbG9uZycpKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uX2Nvb3Jkc19sYXQnKS52YWx1ZSA9IGV2ZW50LmxhdExuZy5sYXQoKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYXRpb25fY29vcmRzX2xvbmcnKS52YWx1ZSA9IGV2ZW50LmxhdExuZy5sbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gSWYgbWFya2VyIGNsdXN0ZXJpbmcgaXMgc2V0LCB1c2UgaXQuXG4gICAgaWYgKG1hcmtlcl9jbHVzdGVyaW5nKSB7XG4gICAgICAgIG5ldyBNYXJrZXJDbHVzdGVyZXIobWFwLCBtYXJrZXJzW2NvdW50ZXJdLCB7IGltYWdlUGF0aDogd3BzZW9fbG9jYWxfZGF0YS5tYXJrZXJfY2x1c3Rlcl9pbWFnZV9wYXRoIH0pO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIG9ubHkgb25lIG1hcmtlciBhbmQgdGhlIGluZm93aW5kb3cgc2hvdWxkIGJlIHNob3duLCBtYWtlIGl0IHNvLlxuICAgIGlmIChtYXJrZXJzW2NvdW50ZXJdLmxlbmd0aCA9PSAxICYmIGRlZmF1bHRfc2hvd19pbmZvd2luZG93KSB7XG4gICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudChtYXJrZXJzW2NvdW50ZXJdWzBdLmh0bWwpO1xuICAgICAgICBpbmZvV2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXA7XG59O1xuXG53aW5kb3cuY2hlY2tGb3JUb3VjaCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAhIShuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL3dlYk9TL2kpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpKTtcbn1cblxud2luZG93Lndwc2VvX2dldF9kaXJlY3Rpb25zID0gZnVuY3Rpb24gKG1hcCwgbG9jYXRpb25fZGF0YSwgY291bnRlciwgc2hvd19yb3V0ZSkge1xuICAgIHZhciBkaXJlY3Rpb25zRGlzcGxheSA9ICcnO1xuXG4gICAgaWYgKHNob3dfcm91dGUgJiYgbG9jYXRpb25fZGF0YS5sZW5ndGggPj0gMSkge1xuICAgICAgICBkaXJlY3Rpb25zRGlzcGxheSA9IG5ldyBnb29nbGUubWFwcy5EaXJlY3Rpb25zUmVuZGVyZXIoKTtcbiAgICAgICAgZGlyZWN0aW9uc0Rpc3BsYXkuc2V0TWFwKG1hcCk7XG4gICAgICAgIGRpcmVjdGlvbnNEaXNwbGF5LnNldFBhbmVsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlyZWN0aW9uc1wiICsgKGNvdW50ZXIgIT0gMCA/ICdfJyArIGNvdW50ZXIgOiAnJykpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlyZWN0aW9uc0Rpc3BsYXk7XG59XG5cbndpbmRvdy5nZXRJbmZvQnViYmxlVGV4dCA9IGZ1bmN0aW9uKGJ1c2luZXNzX25hbWUsIGJ1c2luZXNzX2NpdHlfYWRkcmVzcywgYnVzaW5lc3NfdXJsLCBzZWxmX3VybCkge1xuICAgIHZhciBpbmZvV2luZG93SFRNTCA9ICc8ZGl2IGNsYXNzPVwid3BzZW8taW5mby13aW5kb3ctd3JhcHBlclwiPic7XG5cbiAgICB2YXIgc2hvd1NlbGZMaW5rID0gZmFsc2U7XG4gICAgaWYgKHNlbGZfdXJsICE9IHVuZGVmaW5lZCAmJiB3cHNlb19sb2NhbF9kYXRhLmhhc19tdWx0aXBsZV9sb2NhdGlvbnMgIT0gJycgJiYgc2VsZl91cmwgIT0gd2luZG93LmxvY2F0aW9uLmhyZWYpIHNob3dTZWxmTGluayA9IHRydWU7XG5cbiAgICBpZiAoc2hvd1NlbGZMaW5rKSBpbmZvV2luZG93SFRNTCArPSAnPGEgaHJlZj1cIicgKyBzZWxmX3VybCArICdcIj4nO1xuICAgIGluZm9XaW5kb3dIVE1MICs9ICc8c3Ryb25nPicgKyBidXNpbmVzc19uYW1lICsgJzwvc3Ryb25nPic7XG4gICAgaWYgKHNob3dTZWxmTGluaykgaW5mb1dpbmRvd0hUTUwgKz0gJzwvYT4nO1xuICAgIGluZm9XaW5kb3dIVE1MICs9ICc8YnI+JztcbiAgICBpbmZvV2luZG93SFRNTCArPSBidXNpbmVzc19jaXR5X2FkZHJlc3M7XG5cbiAgICBpbmZvV2luZG93SFRNTCArPSAnPC9kaXY+JztcblxuICAgIHJldHVybiBpbmZvV2luZG93SFRNTDtcbn1cblxud2luZG93Lndwc2VvX2NhbGN1bGF0ZV9yb3V0ZSA9IGZ1bmN0aW9uKG1hcCwgZGlyRGlzcGxheSwgY29vcmRzX2xhdCwgY29vcmRzX2xvbmcsIGNvdW50ZXIpIHtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dwc2VvLXNsLWNvb3Jkcy1sYXQnKSAhPSBudWxsKSBjb29yZHNfbGF0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dwc2VvLXNsLWNvb3Jkcy1sYXQnKS52YWx1ZTtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dwc2VvLXNsLWNvb3Jkcy1sb25nJykgIT0gbnVsbCkgY29vcmRzX2xvbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3BzZW8tc2wtY29vcmRzLWxvbmcnKS52YWx1ZTtcblxuICAgIHZhciBzdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3JpZ2luXCIgKyAoY291bnRlciAhPSAwID8gXCJfXCIgKyBjb3VudGVyIDogXCJcIikpLnZhbHVlICsgJyAnICsgd3BzZW9fbG9jYWxfZGF0YS5kZWZhdWx0X2NvdW50cnk7XG4gICAgdmFyIHVuaXRfc3lzdGVtID0gZ29vZ2xlLm1hcHMuVW5pdFN5c3RlbS5NRVRSSUM7XG4gICAgaWYgKHdwc2VvX2xvY2FsX2RhdGEudW5pdF9zeXN0ZW0gPT0gJ0lNUEVSSUFMJykgdW5pdF9zeXN0ZW0gPSBnb29nbGUubWFwcy5Vbml0U3lzdGVtLklNUEVSSUFMO1xuXG4gICAgLy8gQ2xlYXIgYWxsIG1hcmtlcnMgZnJvbSB0aGUgbWFwLCBvbmx5IHNob3cgQSBhbmQgQlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBtYXJrZXJzW2ldLnNldE1hcChudWxsKTtcbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgYnV0dG9uIHRvIGxpbmsgdG8gR29vZ2xlIE1hcHMuIGlQaG9uZXMgYW5kIEFuZHJvaWQgcGhvbmVzIHdpbGwgYXV0b21hdGljYWxseSBvcGVuIHRoZW0gaW4gTWFwcyBhcHAsIHdoZW4gYXZhaWxhYmxlLlxuICAgIGlmICgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgICAgdmFyIHVybCA9ICdodHRwczovL21hcHMuZ29vZ2xlLmNvbS9tYXBzP3NhZGRyPScgKyBlc2NhcGUoc3RhcnQpICsgJyZkYWRkcj0nICsgY29vcmRzX2xhdCArICcsJyArIGNvb3Jkc19sb25nO1xuICAgICAgICB3aW5kb3cub3Blbih1cmwsICdfYmxhbmsnKTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGxhdGxuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoY29vcmRzX2xhdCwgY29vcmRzX2xvbmcpO1xuXG4gICAgICAgIHZhciByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgb3JpZ2luOiBzdGFydCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBsYXRsbmcsXG4gICAgICAgICAgICBwcm92aWRlUm91dGVBbHRlcm5hdGl2ZXM6IHRydWUsXG4gICAgICAgICAgICBvcHRpbWl6ZVdheXBvaW50czogdHJ1ZSxcbiAgICAgICAgICAgIHRyYXZlbE1vZGU6IGdvb2dsZS5tYXBzLkRpcmVjdGlvbnNUcmF2ZWxNb2RlLkRSSVZJTkcsXG4gICAgICAgICAgICB1bml0U3lzdGVtOiB1bml0X3N5c3RlbVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkaXJlY3Rpb25zU2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5EaXJlY3Rpb25zU2VydmljZSgpO1xuXG4gICAgICAgIGRpcmVjdGlvbnNTZXJ2aWNlLnJvdXRlKHJlcXVlc3QsIGZ1bmN0aW9uIChyZXNwb25zZSwgc3RhdHVzMikge1xuICAgICAgICAgICAgaWYgKHN0YXR1czIgPT0gZ29vZ2xlLm1hcHMuRGlyZWN0aW9uc1N0YXR1cy5PSykge1xuICAgICAgICAgICAgICAgIGRpckRpc3BsYXkuc2V0RGlyZWN0aW9ucyhyZXNwb25zZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1czIgPT0gZ29vZ2xlLm1hcHMuRGlyZWN0aW9uc1N0YXR1cy5aRVJPX1JFU1VMVFMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9yb3V0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cHNlby1ub3JvdXRlJyk7XG4gICAgICAgICAgICAgICAgbm9yb3V0ZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2NsZWFyOiBib3RoOyBkaXNwbGF5OiBibG9jazsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG53aW5kb3cud3BzZW9fc2xfc2hvd19yb3V0ZSA9IGZ1bmN0aW9uKG9iaiwgY29vcmRzX2xhdCwgY29vcmRzX2xvbmcpIHtcbiAgICAkID0galF1ZXJ5O1xuXG4gICAgLy8gQ3JlYXRlIGhpZGRlbiBpbnB1dHMgdG8gcGFzcyB0aHJvdWdoIHRoZSBsYXQvbG9uZyBjb29yZGluYXRlcyBmb3Igd2hpY2ggaXMgbmVlZGVkIGZvciBjYWxjdWxhdGluZyB0aGUgcm91dGUuXG4gICAgJCgnLndwc2VvLXNsLWNvb3JkcycpLnJlbW92ZSgpO1xuICAgIHZhciBpbnB1dHMgPSAnPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBjbGFzcz1cIndwc2VvLXNsLWNvb3Jkc1wiIGlkPVwid3BzZW8tc2wtY29vcmRzLWxhdFwiIHZhbHVlPVwiJyArIGNvb3Jkc19sYXQgKyAnXCI+JztcbiAgICBpbnB1dHMgKz0gJzxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgY2xhc3M9XCJ3cHNlby1zbC1jb29yZHNcIiBpZD1cIndwc2VvLXNsLWNvb3Jkcy1sb25nXCIgdmFsdWU9XCInICsgY29vcmRzX2xvbmcgKyAnXCI+JztcblxuICAgICQoJyN3cHNlby1kaXJlY3Rpb25zLWZvcm0nKS5hcHBlbmQoaW5wdXRzKS5zdWJtaXQoKTtcbiAgICAkKCcjd3BzZW8tZGlyZWN0aW9ucy13cmFwcGVyJykuc2xpZGVVcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuaW5zZXJ0QWZ0ZXIoJChvYmopLnBhcmVudHMoJy53cHNlby1yZXN1bHQnKSkuc2xpZGVEb3duKCk7XG4gICAgfSk7XG59XG5cbndpbmRvdy5maWx0ZXJNYXJrZXJzID0gZnVuY3Rpb24oY2F0ZWdvcnksIG1hcF9pZCkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBtYXJrZXJzW21hcF9pZF0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWFya2VyID0gbWFya2Vyc1ttYXBfaWRdW2ldO1xuXG4gICAgICAgIC8vIElmIGlzIHNhbWUgY2F0ZWdvcnkgb3IgY2F0ZWdvcnkgbm90IHBpY2tlZFxuICAgICAgICBpZiAobWFya2VyLmNhdGVnb3JpZXMuaGFzT3duUHJvcGVydHkoY2F0ZWdvcnkpIHx8IGNhdGVnb3J5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbWFya2VyLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2F0ZWdvcmllcyBkb24ndCBtYXRjaFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1hcmtlci5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ==
